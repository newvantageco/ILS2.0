# ================================
# ILS 2.0 - Railway Environment Variables Template
# ================================
# Copy these to Railway dashboard under Variables tab
# Replace <placeholder> values with your actual values
# Remove or comment out optional variables you don't need

# ================================
# CORE APPLICATION
# ================================

# Database - Auto-populated by Railway PostgreSQL plugin
DATABASE_URL=${{Postgres.DATABASE_URL}}

# Server Configuration
NODE_ENV=production
PORT=5000
HOST=0.0.0.0
APP_URL=https://<your-app>.railway.app

# ================================
# SECURITY & AUTHENTICATION
# ================================

# Session Secret (REQUIRED - Generate with: openssl rand -hex 32)
SESSION_SECRET=<generate-32-byte-hex-string>

# CSRF Protection (Generate with: openssl rand -hex 32)
CSRF_SECRET=<generate-32-byte-hex-string>
CSRF_ENABLED=true

# CORS Configuration
CORS_ORIGIN=https://<your-app>.railway.app

# JWT Authentication (Generate with: openssl rand -hex 32)
JWT_SECRET=<generate-32-byte-hex-string>
JWT_EXPIRES_IN=7d
JWT_REFRESH_EXPIRES_IN=30d
JWT_AUTH_ENABLED=true
JWT_AUTH_REQUIRED=false

# Admin Setup Key (optional - for initial admin setup)
ADMIN_SETUP_KEY=<your-secure-admin-key>

# ================================
# REDIS (OPTIONAL BUT RECOMMENDED)
# ================================

# Auto-populated by Railway Redis plugin
REDIS_URL=${{Redis.REDIS_URL}}

# Or manual configuration
# REDIS_HOST=containers-us-west-1.railway.app
# REDIS_PORT=6379
# REDIS_PASSWORD=<password>
# REDIS_TLS=true

# Session Store Configuration
SESSION_STORE=redis
# SESSION_STORE=memory  # Fallback if no Redis

# ================================
# EMAIL SERVICE (REQUIRED)
# ================================

# Option 1: Resend (Recommended)
RESEND_API_KEY=<your-resend-api-key>
EMAIL_FROM=noreply@yourdomain.com
EMAIL_PROVIDER=resend

# Option 2: SMTP
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=<your-email>
# SMTP_PASS=<your-app-password>
# SMTP_SECURE=true
# EMAIL_PROVIDER=smtp

# Email Configuration
EMAIL_SUPPORT=support@yourdomain.com
EMAIL_ADMIN=admin@yourdomain.com

# ================================
# PAYMENT PROCESSING (STRIPE)
# ================================

# Stripe API Keys
STRIPE_SECRET_KEY=sk_live_<your-secret-key>
STRIPE_PUBLISHABLE_KEY=pk_live_<your-publishable-key>
STRIPE_WEBHOOK_SECRET=whsec_<your-webhook-secret>

# Stripe Price IDs
STRIPE_BASIC_PRICE_ID=price_<basic-price-id>
STRIPE_PRO_PRICE_ID=price_<pro-price-id>
STRIPE_ENTERPRISE_PRICE_ID=price_<enterprise-price-id>

# Stripe Configuration
STRIPE_SUCCESS_URL=https://<your-app>.railway.app/billing/success
STRIPE_CANCEL_URL=https://<your-app>.railway.app/billing/cancel
STRIPE_WEBHOOK_URL=https://<your-app>.railway.app/api/webhooks/stripe

# ================================
# AI SERVICES (OPTIONAL)
# ================================

# OpenAI Configuration
OPENAI_API_KEY=sk-<your-openai-key>
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_VISION_MODEL=gpt-4-vision-preview
OPENAI_MAX_TOKENS=4000
OPENAI_TEMPERATURE=0.7

# Anthropic Claude Configuration
ANTHROPIC_API_KEY=sk-ant-<your-anthropic-key>
ANTHROPIC_MODEL=claude-3-opus-20240229
ANTHROPIC_MAX_TOKENS=4000

# Internal AI Service URLs (adjust to your Railway internal URLs)
AI_SERVICE_URL=http://ils-ai-service.railway.internal:8080
ANALYTICS_SERVICE_URL=http://ils-analytics-service.railway.internal:8000
RAG_SERVICE_URL=http://ils-rag-service.railway.internal:8001

# AI Feature Flags
ENABLE_AI_FEATURES=true
ENABLE_AI_PRESCRIPTIONS=true
ENABLE_AI_CLINICAL_SUPPORT=true

# ================================
# STORAGE CONFIGURATION (CHOOSE ONE)
# ================================

# Storage Provider (s3 | r2 | azure | local)
STORAGE_PROVIDER=s3

# Option 1: AWS S3
AWS_ACCESS_KEY_ID=<your-access-key>
AWS_SECRET_ACCESS_KEY=<your-secret-key>
AWS_REGION=us-east-1
AWS_S3_BUCKET=ils-production
AWS_S3_ENDPOINT=https://s3.us-east-1.amazonaws.com

# Option 2: Cloudflare R2
# R2_ACCOUNT_ID=<your-account-id>
# R2_ACCESS_KEY_ID=<your-access-key>
# R2_SECRET_ACCESS_KEY=<your-secret-key>
# R2_BUCKET_NAME=ils-production
# R2_ENDPOINT=https://<account-id>.r2.cloudflarestorage.com

# Option 3: Azure Blob Storage
# AZURE_STORAGE_ACCOUNT=<your-account>
# AZURE_STORAGE_KEY=<your-key>
# AZURE_STORAGE_CONTAINER=ils-production

# Option 4: Local/Railway Volumes
# UPLOAD_DIR=/app/uploads

# File Upload Limits
MAX_FILE_SIZE=10485760
MAX_FILES_PER_UPLOAD=10

# ================================
# OAUTH PROVIDERS (OPTIONAL)
# ================================

# Google OAuth
GOOGLE_CLIENT_ID=<your-client-id>.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=<your-client-secret>
GOOGLE_CALLBACK_URL=https://<your-app>.railway.app/api/auth/google/callback

# Microsoft Azure AD (Optional)
# AZURE_AD_CLIENT_ID=<your-client-id>
# AZURE_AD_CLIENT_SECRET=<your-client-secret>
# AZURE_AD_TENANT_ID=<your-tenant-id>

# ================================
# MONITORING & OBSERVABILITY
# ================================

# Sentry Error Tracking
SENTRY_DSN=https://<key>@<org>.ingest.sentry.io/<project>
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# PostHog Product Analytics
POSTHOG_API_KEY=phc_<your-key>
POSTHOG_HOST=https://app.posthog.com

# Logging Configuration
LOG_LEVEL=info
LOG_FORMAT=json
ENABLE_REQUEST_LOGGING=true

# ================================
# INTEGRATIONS (OPTIONAL)
# ================================

# Twilio (SMS/WhatsApp)
TWILIO_ACCOUNT_SID=<your-account-sid>
TWILIO_AUTH_TOKEN=<your-auth-token>
TWILIO_PHONE_NUMBER=<your-twilio-number>
TWILIO_WHATSAPP_NUMBER=whatsapp:<your-whatsapp-number>

# Shopify Integration
SHOPIFY_STORE_URL=<your-store>.myshopify.com
SHOPIFY_ACCESS_TOKEN=<your-access-token>
SHOPIFY_API_KEY=<your-api-key>
SHOPIFY_API_SECRET=<your-api-secret>
ENABLE_SHOPIFY_INTEGRATION=false

# LIMS Integration
LIMS_API_URL=https://lims.example.com/api
LIMS_API_KEY=<your-lims-api-key>
LIMS_ENABLED=false

# NHS Integration (UK)
NHS_API_URL=https://api.nhsbsa.nhs.uk
NHS_API_KEY=<your-nhs-api-key>
ENABLE_NHS_INTEGRATION=false

# ================================
# FEATURE FLAGS
# ================================

# Core Features
ENABLE_ANALYTICS=true
ENABLE_NOTIFICATIONS=true
ENABLE_BACKGROUND_JOBS=true
ENABLE_WEBSOCKETS=true

# Business Features
ENABLE_SUBSCRIPTIONS=true
ENABLE_METERED_BILLING=true
ENABLE_MULTI_TENANT=true

# Clinical Features
ENABLE_CLINICAL_WORKFLOWS=true
ENABLE_LABORATORY_MANAGEMENT=true
ENABLE_EQUIPMENT_TRACKING=true
ENABLE_TEST_ROOM_BOOKING=true

# ================================
# PERFORMANCE & SCALING
# ================================

# Database Connection Pooling
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_IDLE_TIMEOUT=10000

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Session Configuration
SESSION_MAX_AGE=86400000
SESSION_ROLLING=true
SESSION_SAVE_UNINITIALIZED=false

# Worker Configuration
WORKER_CONCURRENCY=5
WORKER_MAX_JOBS_PER_WORKER=50

# ================================
# DEVELOPMENT & DEBUGGING
# ================================

# Debug Mode (NEVER enable in production)
DEBUG=false
ENABLE_DEBUG_LOGGING=false

# Development Tools
DRIZZLE_STUDIO_PORT=4983

# ================================
# COMPLIANCE & REGULATIONS
# ================================

# GDPR Compliance
GDPR_ENABLED=true
GDPR_DATA_RETENTION_DAYS=2555

# HIPAA Compliance (Healthcare)
HIPAA_ENABLED=true
AUDIT_LOGGING_ENABLED=true

# Data Protection
ENCRYPTION_KEY=<generate-32-byte-hex-string>
ENABLE_DATA_ENCRYPTION=true

# ================================
# CRON JOBS & SCHEDULED TASKS
# ================================

# Enable Cron Jobs
ENABLE_CRON_JOBS=true

# Cron Schedule (cron syntax)
DAILY_BRIEFING_CRON=0 8 * * *
INVENTORY_CHECK_CRON=0 */4 * * *
ANALYTICS_SYNC_CRON=*/15 * * * *

# ================================
# TIMEZONE & LOCALIZATION
# ================================

TZ=UTC
DEFAULT_LOCALE=en-US
DEFAULT_CURRENCY=GBP

# ================================
# NOTES
# ================================

# 1. Variables prefixed with ${{...}} are auto-populated by Railway plugins
# 2. Generate secrets with: openssl rand -hex 32
# 3. Set APP_URL to your Railway-assigned domain or custom domain
# 4. Configure webhooks AFTER first deployment when you have a URL
# 5. Store this file securely - it contains sensitive configuration
# 6. Use Railway's "Variables" tab to set these in production
# 7. You can import this file using Railway CLI: railway variables set --file railway.env

# ================================
# QUICK START MINIMAL SETUP
# ================================

# For a minimal working deployment, you MUST set:
# 1. DATABASE_URL (auto-set by Railway PostgreSQL)
# 2. SESSION_SECRET (generate new)
# 3. CSRF_SECRET (generate new)
# 4. JWT_SECRET (generate new)
# 5. APP_URL (your Railway domain)
# 6. CORS_ORIGIN (your Railway domain)
# 7. RESEND_API_KEY or SMTP credentials
# 8. STRIPE_SECRET_KEY and related Stripe vars
# 9. STORAGE_PROVIDER and related storage vars

# Everything else is optional but recommended for full functionality
