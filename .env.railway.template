# ========================================
# Railway Environment Variables Template
# ========================================
# Copy these to Railway Dashboard â†’ Variables panel
# Replace placeholder values with actual values

# ================
# CORE APPLICATION
# ================
NODE_ENV=production
PORT=${{PORT}}  # Railway auto-assigns
HOST=0.0.0.0
APP_URL=https://app.yourdomain.com  # Update with your domain

# ========
# DATABASE
# ========
DATABASE_URL=${{Postgres.DATABASE_URL}}  # Railway provides this automatically

# ===================
# SECURITY & SESSIONS
# ===================
# Generate with: openssl rand -base64 32
SESSION_SECRET=<GENERATE_ME>

# Generate with: openssl rand -base64 24
ADMIN_SETUP_KEY=<GENERATE_ME>

# If using JWT authentication
JWT_SECRET=<GENERATE_ME>

# =====
# REDIS
# =====
# Railway provides these automatically when Redis service is added
REDIS_URL=${{Redis.REDIS_URL}}
REDIS_HOST=${{Redis.REDIS_HOST}}
REDIS_PORT=${{Redis.REDIS_PORT}}
REDIS_PASSWORD=${{Redis.REDIS_PASSWORD}}

# =================
# EMAIL (RESEND)
# =================
RESEND_API_KEY=re_xxxxxxxxxxxx
MAIL_FROM=hello@yourdomain.com

# ==================
# PAYMENTS (STRIPE)
# ==================
# IMPORTANT: Use LIVE keys for production (sk_live_, pk_live_)
STRIPE_SECRET_KEY=sk_live_xxxxxxxxxxxx
STRIPE_PUBLISHABLE_KEY=pk_live_xxxxxxxxxxxx
STRIPE_WEBHOOK_SECRET=whsec_xxxxxxxxxxxx

# ==================
# AI SERVICES
# ==================
# Optional - only add if using AI features
OPENAI_API_KEY=sk-xxxxxxxxxxxx
ANTHROPIC_API_KEY=sk-ant-xxxxxxxxxxxx

# =======
# STORAGE
# =======
# Options: local, s3, cloudflare-r2, azure-blob
STORAGE_PROVIDER=local

# If using AWS S3:
# AWS_REGION=us-east-1
# AWS_ACCESS_KEY_ID=AKIAXXXXXXXXXXXX
# AWS_SECRET_ACCESS_KEY=xxxxxxxxxxxx
# AWS_S3_BUCKET=ils-production

# If using Cloudflare R2:
# R2_ACCOUNT_ID=xxxxxxxxxxxx
# R2_ACCESS_KEY_ID=xxxxxxxxxxxx
# R2_SECRET_ACCESS_KEY=xxxxxxxxxxxx
# R2_BUCKET=ils-production

# ============================
# MASTER USER (OPTIONAL)
# ============================
# Auto-provisions an admin user on first startup
MASTER_USER_EMAIL=admin@yourdomain.com
MASTER_USER_PASSWORD=<SECURE_PASSWORD_12_CHARS_MIN>
MASTER_USER_FIRST_NAME=Admin
MASTER_USER_LAST_NAME=User
MASTER_USER_ORGANIZATION=Platform Control

# ============================
# MONITORING & ANALYTICS
# ============================
# Optional but recommended for production

# Sentry Error Tracking
# SENTRY_DSN=https://xxxxxxxxxxxx@sentry.io/xxxxxxxxxxxx

# PostHog Product Analytics
# POSTHOG_API_KEY=phc_xxxxxxxxxxxx

# Enable Prometheus metrics endpoint
# METRICS_ENABLED=true

# ============================
# CORS & SECURITY
# ============================
# Comma-separated list of allowed origins
CORS_ORIGIN=https://app.yourdomain.com,https://www.yourdomain.com

# ============================
# FEATURE FLAGS
# ============================
# Enable/disable features without code changes

# Enable AI features
FEATURE_AI_ENABLED=true

# Enable payment processing
FEATURE_PAYMENTS_ENABLED=true

# Enable email notifications
FEATURE_EMAIL_ENABLED=true

# ============================
# OPTIONAL INTEGRATIONS
# ============================

# Shopify Integration
# SHOPIFY_SHOP_URL=your-shop.myshopify.com
# SHOPIFY_ACCESS_TOKEN=shpat_xxxxxxxxxxxx
# SHOPIFY_API_KEY=xxxxxxxxxxxx
# SHOPIFY_API_SECRET=xxxxxxxxxxxx
# SHOPIFY_WEBHOOK_SECRET=xxxxxxxxxxxx

# External LIMS Integration
# LIMS_API_BASE_URL=https://lims.example.com
# LIMS_API_KEY=xxxxxxxxxxxx
# LIMS_WEBHOOK_SECRET=xxxxxxxxxxxx

# ============================
# RAILWAY-SPECIFIC SETTINGS
# ============================

# Health check configuration (already in railway.json)
# Health check path: /api/health
# Health check interval: 30s
# Health check timeout: 10s

# Restart policy (already in railway.json)
# restartPolicyType: ON_FAILURE
# restartPolicyMaxRetries: 10

# ============================
# DEPLOYMENT NOTES
# ============================
#
# 1. Railway automatically provides:
#    - DATABASE_URL (from Postgres service)
#    - REDIS_URL, REDIS_HOST, REDIS_PORT, REDIS_PASSWORD (from Redis service)
#    - PORT (Railway assigns this dynamically)
#
# 2. Required variables to set manually:
#    - SESSION_SECRET
#    - ADMIN_SETUP_KEY
#    - APP_URL
#    - RESEND_API_KEY (if using email)
#    - STRIPE keys (if using payments)
#
# 3. Generate secure secrets:
#    openssl rand -base64 32  # For SESSION_SECRET
#    openssl rand -base64 24  # For ADMIN_SETUP_KEY
#
# 4. Stripe webhook endpoint:
#    https://app.yourdomain.com/api/stripe/webhooks
#
# 5. Health check endpoint:
#    https://app.yourdomain.com/api/health
#
# ============================
