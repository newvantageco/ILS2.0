import{r as x,e}from"./vendor-react-yzYIzJFU.js";import{u as S,a as C}from"./vendor-react-query-Dxpktacb.js";import{c as ae,e as ie,C as m,h as o,i as d,a as c,U as te,ab as re,j as T,f as i,T as R,y as ne,n as H,d as $,a2 as A,a4 as U,a5 as k,a6 as I,a7 as L,a8 as E,_ as le,a1 as q,Y as z,B as p}from"./index-BiBisH8X.js";import{c as P,o as me,a as oe}from"./optimisticUpdates-DCvK2NTo.js";import{T as de,a as ce,b as B,c as u,d as ue,e as b}from"./table-cFqY84xs.js";import{S as be,a as he,b as pe,c as Ne,d as f}from"./select-BquPdUcS.js";import{L as M}from"./label-DDyL8AZL.js";import{T as De}from"./textarea-DoojhZ6C.js";import{S as xe}from"./CardSkeleton-fD8CCydl.js";import{T as fe}from"./TableSkeleton-CSZegB3T.js";import{E as ge}from"./EmptyState-ugLtOoCh.js";import{C as ve}from"./clock-CfQc0zyb.js";import{U as Se}from"./user-check-BHjWCDPl.js";import{U as Ae}from"./user-x-B4AYNh-c.js";import{Z as Q}from"./zap-jN_IYbL_.js";import{L as F}from"./lightbulb-BX0Wy-yj.js";import{T as Ue}from"./trash-2-CGREO2o6.js";import{C as ke}from"./circle-x-CIGbUkxi.js";import"./vendor-mui-DFe-F-Gn.js";import"./vendor-radix-B6etWzp2.js";import"./skeleton-a1RpvyBN.js";const K=ae("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);function Ze(){ie();const[Ie,Le]=x.useState(null),[a,r]=x.useState({type:null,user:null}),[j,V]=x.useState(""),[N,g]=x.useState(""),{data:y=[],isLoading:O}=S({queryKey:["/api/admin/users"]}),{data:t}=S({queryKey:["/api/admin/stats"]}),{data:n}=S({queryKey:["/api/admin/ai-stats"]}),w=(()=>{const s=[];return t?.pending&&t.pending>5&&s.push({id:"pending-users",title:`${t.pending} pending approvals`,question:`I have ${t.pending} users pending approval. What criteria should I use to evaluate them and how can I streamline the approval process?`,icon:le,color:"text-orange-600"}),t?.suspended&&t.suspended>3&&s.push({id:"suspended-users",title:`${t.suspended} suspended accounts`,question:`There are ${t.suspended} suspended accounts. How should I review and manage suspended users?`,icon:K,color:"text-red-600"}),n?.rateLimitHits&&n.rateLimitHits>10&&s.push({id:"rate-limits",title:"High rate limit hits",question:`I'm seeing ${n.rateLimitHits} rate limit hits. How can I optimize AI usage and adjust limits for better user experience?`,icon:Q,color:"text-yellow-600"}),n?.cacheHitRate&&n.cacheHitRate<50&&s.push({id:"cache-optimization",title:"Low cache hit rate",question:`The AI cache hit rate is ${n.cacheHitRate}%. How can I improve caching to reduce costs and improve performance?`,icon:R,color:"text-blue-600"}),s.length===0&&s.push({id:"user-management",title:"User management tips",question:"What are best practices for managing users, roles, and permissions at scale?",icon:$,color:"text-primary"},{id:"platform-optimization",title:"Platform optimization",question:"How can I optimize the platform for better performance and user satisfaction?",icon:F,color:"text-purple-600"}),s.slice(0,3)})(),W=s=>{window.location.href=`/admin/ai-assistant?q=${encodeURIComponent(s)}`},h=C({mutationFn:async s=>await(await z("PATCH",`/api/admin/users/${s.userId}`,s.updates)).json(),...P({queryKey:["/api/admin/users"],updater:(s,l)=>me(s,l.userId,se=>({...se,...l.updates}))||[],successMessage:"User updated successfully",errorMessage:"Failed to update user"}),onSuccess:()=>{r({type:null,user:null}),V(""),g(""),q.invalidateQueries({queryKey:["/api/admin/stats"]})}}),v=C({mutationFn:async s=>await(await z("DELETE",`/api/admin/users/${s}`)).json(),...P({queryKey:["/api/admin/users"],updater:(s,l)=>oe(s,l)||[],successMessage:"User deleted successfully",errorMessage:"Failed to delete user"}),onSuccess:()=>{r({type:null,user:null}),q.invalidateQueries({queryKey:["/api/admin/stats"]})}}),_=s=>{h.mutate({userId:s.id,updates:{accountStatus:"active"}})},X=()=>{a.user&&h.mutate({userId:a.user.id,updates:{accountStatus:"suspended",statusReason:j||"Suspended by administrator"}})},Z=s=>{h.mutate({userId:s.id,updates:{accountStatus:"active",statusReason:null}})},Y=()=>{!a.user||!N||h.mutate({userId:a.user.id,updates:{role:N}})},G=()=>{a.user&&v.mutate(a.user.id)},D=s=>s.firstName&&s.lastName?`${s.firstName} ${s.lastName}`:s.email||"Unknown User",J=s=>{switch(s){case"active":return e.jsxDEV(p,{variant:"default",className:"bg-green-500",children:"Active"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:228,columnNumber:16},this);case"pending":return e.jsxDEV(p,{variant:"secondary",children:"Pending"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:230,columnNumber:16},this);case"suspended":return e.jsxDEV(p,{variant:"destructive",children:"Suspended"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:232,columnNumber:16},this);default:return e.jsxDEV(p,{children:s},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:234,columnNumber:16},this)}},ee=s=>{if(!s)return e.jsxDEV(p,{variant:"outline",children:"No Role"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:239,columnNumber:23},this);const l={ecp:"ECP",lab_tech:"Lab Tech",engineer:"Engineer",supplier:"Supplier",admin:"Admin"};return e.jsxDEV(p,{variant:"outline",children:l[s]||s},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:249,columnNumber:12},this)};return O?e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-3xl font-bold",children:"Admin Dashboard"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:256,columnNumber:11},this),e.jsxDEV("p",{className:"text-muted-foreground",children:"Manage users and platform access"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:257,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:255,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(s=>e.jsxDEV(xe,{},s,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:261,columnNumber:13},this))},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:259,columnNumber:9},this),e.jsxDEV(m,{children:[e.jsxDEV(o,{children:e.jsxDEV(d,{children:"All Users"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:266,columnNumber:13},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:265,columnNumber:11},this),e.jsxDEV(c,{children:e.jsxDEV(fe,{rows:5,columns:7},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:269,columnNumber:13},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:268,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:264,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:254,columnNumber:7},this):e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-3xl font-bold","data-testid":"text-page-title",children:"Admin Dashboard"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:279,columnNumber:9},this),e.jsxDEV("p",{className:"text-muted-foreground",children:"Manage users and platform access"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:280,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:278,columnNumber:7},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxDEV(m,{children:[e.jsxDEV(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxDEV(d,{className:"text-sm font-medium",children:"Total Users"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:287,columnNumber:13},this),e.jsxDEV(te,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:288,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:286,columnNumber:11},this),e.jsxDEV(c,{children:e.jsxDEV("div",{className:"text-2xl font-bold","data-testid":"stat-total-users",children:t?.total||0},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:291,columnNumber:13},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:290,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:285,columnNumber:9},this),e.jsxDEV(m,{children:[e.jsxDEV(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxDEV(d,{className:"text-sm font-medium",children:"Pending Approval"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:297,columnNumber:13},this),e.jsxDEV(ve,{className:"h-4 w-4 text-yellow-500"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:298,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:296,columnNumber:11},this),e.jsxDEV(c,{children:e.jsxDEV("div",{className:"text-2xl font-bold","data-testid":"stat-pending-users",children:t?.pending||0},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:301,columnNumber:13},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:300,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:295,columnNumber:9},this),e.jsxDEV(m,{children:[e.jsxDEV(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxDEV(d,{className:"text-sm font-medium",children:"Active Users"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:307,columnNumber:13},this),e.jsxDEV(Se,{className:"h-4 w-4 text-green-500"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:308,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:306,columnNumber:11},this),e.jsxDEV(c,{children:e.jsxDEV("div",{className:"text-2xl font-bold","data-testid":"stat-active-users",children:t?.active||0},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:311,columnNumber:13},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:310,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:305,columnNumber:9},this),e.jsxDEV(m,{children:[e.jsxDEV(o,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxDEV(d,{className:"text-sm font-medium",children:"Suspended"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:317,columnNumber:13},this),e.jsxDEV(Ae,{className:"h-4 w-4 text-destructive"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:318,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:316,columnNumber:11},this),e.jsxDEV(c,{children:e.jsxDEV("div",{className:"text-2xl font-bold","data-testid":"stat-suspended-users",children:t?.suspended||0},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:321,columnNumber:13},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:320,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:315,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:284,columnNumber:7},this),e.jsxDEV(m,{className:"border-primary/20 bg-gradient-to-br from-primary/5 to-background",children:[e.jsxDEV(o,{children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(re,{className:"h-5 w-5 text-primary"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:330,columnNumber:13},this),e.jsxDEV(d,{children:"AI System Statistics"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:331,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:329,columnNumber:11},this),e.jsxDEV(T,{children:"Platform-wide AI Assistant usage and performance"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:333,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:328,columnNumber:9},this),e.jsxDEV(c,{children:[e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxDEV("div",{className:"text-center p-4 rounded-lg bg-background border",children:[e.jsxDEV("div",{className:"text-2xl font-bold text-primary",children:n?.totalQueries||0},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:338,columnNumber:15},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground mt-1",children:"Total Queries"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:339,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:337,columnNumber:13},this),e.jsxDEV("div",{className:"text-center p-4 rounded-lg bg-background border",children:[e.jsxDEV("div",{className:"text-2xl font-bold text-green-600",children:n?.activeUsers||0},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:342,columnNumber:15},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground mt-1",children:"Active Users"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:343,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:341,columnNumber:13},this),e.jsxDEV("div",{className:"text-center p-4 rounded-lg bg-background border",children:[e.jsxDEV("div",{className:"text-2xl font-bold text-blue-600",children:[n?.cacheHitRate||0,"%"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:346,columnNumber:15},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground mt-1",children:"Cache Hit Rate"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:347,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:345,columnNumber:13},this),e.jsxDEV("div",{className:"text-center p-4 rounded-lg bg-background border",children:[e.jsxDEV("div",{className:"text-2xl font-bold text-orange-600",children:n?.rateLimitHits||0},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:350,columnNumber:15},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground mt-1",children:"Rate Limit Hits"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:351,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:349,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:336,columnNumber:11},this),e.jsxDEV("div",{className:"mt-4 flex gap-2",children:[e.jsxDEV(i,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsxDEV(R,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:356,columnNumber:15},this),"View AI Analytics"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:355,columnNumber:13},this),e.jsxDEV(i,{variant:"outline",size:"sm",className:"flex-1",children:[e.jsxDEV(Q,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:360,columnNumber:15},this),"AI Settings"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:359,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:354,columnNumber:11},this),w.length>0&&e.jsxDEV("div",{className:"mt-4 pt-4 border-t",children:[e.jsxDEV("div",{className:"flex items-center gap-2 mb-3",children:[e.jsxDEV(F,{className:"h-4 w-4 text-primary"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:369,columnNumber:17},this),e.jsxDEV("span",{className:"text-sm font-medium",children:"AI Suggested Actions"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:370,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:368,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-2",children:w.map(s=>e.jsxDEV("button",{onClick:()=>W(s.question),className:"w-full text-left p-2 rounded-lg hover:bg-background/80 transition-colors border border-border/50 hover:border-primary/50 group",children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(s.icon,{className:`h-4 w-4 ${s.color} group-hover:scale-110 transition-transform`},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:380,columnNumber:23},this),e.jsxDEV("span",{className:"text-xs sm:text-sm font-medium group-hover:text-primary transition-colors",children:s.title},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:381,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:379,columnNumber:21},this)},s.id,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:374,columnNumber:19},this))},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:372,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:367,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:335,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:327,columnNumber:7},this),e.jsxDEV(m,{children:[e.jsxDEV(o,{children:[e.jsxDEV(d,{children:"All Users"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:396,columnNumber:11},this),e.jsxDEV(T,{children:"Manage user accounts and permissions"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:397,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:395,columnNumber:9},this),e.jsxDEV(c,{children:y.length===0?e.jsxDEV(ge,{icon:ne,title:"No users found",description:"Users will appear here once they register for the platform."},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:401,columnNumber:13},this):e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV(de,{children:[e.jsxDEV(ce,{children:e.jsxDEV(B,{children:[e.jsxDEV(u,{children:"Name"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:411,columnNumber:21},this),e.jsxDEV(u,{children:"Email"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:412,columnNumber:21},this),e.jsxDEV(u,{children:"Organization"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:413,columnNumber:21},this),e.jsxDEV(u,{children:"Role"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:414,columnNumber:21},this),e.jsxDEV(u,{children:"Status"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:415,columnNumber:21},this),e.jsxDEV(u,{children:"Registered"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:416,columnNumber:21},this),e.jsxDEV(u,{children:"Actions"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:417,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:410,columnNumber:19},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:409,columnNumber:17},this),e.jsxDEV(ue,{children:y.map(s=>e.jsxDEV(B,{"data-testid":`row-user-${s.id}`,children:[e.jsxDEV(b,{className:"font-medium",children:D(s)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:423,columnNumber:23},this),e.jsxDEV(b,{children:s.email},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:424,columnNumber:23},this),e.jsxDEV(b,{children:s.organizationName||"-"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:425,columnNumber:23},this),e.jsxDEV(b,{children:ee(s.role)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:426,columnNumber:23},this),e.jsxDEV(b,{children:J(s.accountStatus)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:427,columnNumber:23},this),e.jsxDEV(b,{children:new Date(s.createdAt).toLocaleDateString()},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:428,columnNumber:23},this),e.jsxDEV(b,{children:e.jsxDEV("div",{className:"flex gap-2 flex-wrap",children:[s.accountStatus==="pending"&&e.jsxDEV(i,{size:"sm",variant:"default",onClick:()=>_(s),"data-testid":`button-approve-${s.id}`,children:[e.jsxDEV(H,{className:"h-4 w-4 mr-1"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:438,columnNumber:31},this),"Approve"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:432,columnNumber:29},this),s.accountStatus==="active"&&e.jsxDEV(i,{size:"sm",variant:"destructive",onClick:()=>r({type:"suspend",user:s}),"data-testid":`button-suspend-${s.id}`,children:[e.jsxDEV(K,{className:"h-4 w-4 mr-1"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:450,columnNumber:31},this),"Suspend"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:444,columnNumber:29},this),s.accountStatus==="suspended"&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(i,{size:"sm",variant:"default",onClick:()=>Z(s),"data-testid":`button-activate-${s.id}`,children:[e.jsxDEV(H,{className:"h-4 w-4 mr-1"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:463,columnNumber:33},this),"Activate"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:457,columnNumber:31},this),e.jsxDEV(i,{size:"sm",variant:"destructive",onClick:()=>r({type:"delete",user:s}),"data-testid":`button-delete-${s.id}`,children:[e.jsxDEV(Ue,{className:"h-4 w-4 mr-1"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:472,columnNumber:33},this),"Delete"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:466,columnNumber:31},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:456,columnNumber:29},this),s.role&&s.role!=="admin"&&e.jsxDEV(i,{size:"sm",variant:"outline",onClick:()=>{g(s.role||""),r({type:"change-role",user:s})},"data-testid":`button-change-role-${s.id}`,children:[e.jsxDEV($,{className:"h-4 w-4 mr-1"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:488,columnNumber:31},this),"Change Role"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:479,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:430,columnNumber:25},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:429,columnNumber:23},this)]},s.id,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:422,columnNumber:21},this))},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:420,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:408,columnNumber:15},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:407,columnNumber:13},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:399,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:394,columnNumber:7},this),e.jsxDEV(A,{open:a.type==="suspend",onOpenChange:s=>!s&&r({type:null,user:null}),children:e.jsxDEV(U,{"data-testid":"dialog-suspend-user",children:[e.jsxDEV(k,{children:[e.jsxDEV(I,{children:"Suspend User Account"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:507,columnNumber:13},this),e.jsxDEV(L,{children:["This will suspend ",a.user&&D(a.user),"'s account and prevent them from accessing the system."]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:508,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:506,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-4 py-4",children:e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(M,{htmlFor:"suspension-reason",children:"Reason for Suspension"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:514,columnNumber:15},this),e.jsxDEV(De,{id:"suspension-reason",placeholder:"Enter reason for suspension...",value:j,onChange:s=>V(s.target.value),"data-testid":"input-suspension-reason"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:515,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:513,columnNumber:13},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:512,columnNumber:11},this),e.jsxDEV(E,{children:[e.jsxDEV(i,{variant:"outline",onClick:()=>r({type:null,user:null}),"data-testid":"button-cancel-suspend",children:"Cancel"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:525,columnNumber:13},this),e.jsxDEV(i,{variant:"destructive",onClick:X,disabled:h.isPending,"data-testid":"button-confirm-suspend",children:"Suspend Account"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:532,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:524,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:505,columnNumber:9},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:504,columnNumber:7},this),e.jsxDEV(A,{open:a.type==="change-role",onOpenChange:s=>!s&&r({type:null,user:null}),children:e.jsxDEV(U,{"data-testid":"dialog-change-role",children:[e.jsxDEV(k,{children:[e.jsxDEV(I,{children:"Change User Role"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:548,columnNumber:13},this),e.jsxDEV(L,{children:["Update the role for ",a.user&&D(a.user)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:549,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:547,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-4 py-4",children:e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(M,{htmlFor:"new-role",children:"New Role"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:555,columnNumber:15},this),e.jsxDEV(be,{value:N,onValueChange:g,children:[e.jsxDEV(he,{id:"new-role","data-testid":"select-new-role",children:e.jsxDEV(pe,{placeholder:"Select new role"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:558,columnNumber:19},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:557,columnNumber:17},this),e.jsxDEV(Ne,{children:[e.jsxDEV(f,{value:"ecp",children:"Eye Care Professional"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:561,columnNumber:19},this),e.jsxDEV(f,{value:"lab_tech",children:"Lab Technician"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:562,columnNumber:19},this),e.jsxDEV(f,{value:"engineer",children:"Engineer"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:563,columnNumber:19},this),e.jsxDEV(f,{value:"supplier",children:"Supplier"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:564,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:560,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:556,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:554,columnNumber:13},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:553,columnNumber:11},this),e.jsxDEV(E,{children:[e.jsxDEV(i,{variant:"outline",onClick:()=>r({type:null,user:null}),"data-testid":"button-cancel-role-change",children:"Cancel"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:570,columnNumber:13},this),e.jsxDEV(i,{onClick:Y,disabled:h.isPending||!N,"data-testid":"button-confirm-role-change",children:"Update Role"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:577,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:569,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:546,columnNumber:9},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:545,columnNumber:7},this),e.jsxDEV(A,{open:a.type==="delete",onOpenChange:s=>!s&&r({type:null,user:null}),children:e.jsxDEV(U,{"data-testid":"dialog-delete-user",children:[e.jsxDEV(k,{children:[e.jsxDEV(I,{children:"Delete User Account"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:592,columnNumber:13},this),e.jsxDEV(L,{children:["Are you sure you want to permanently delete ",a.user&&D(a.user),"'s account? This action cannot be undone and will remove all associated data."]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:593,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:591,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-4 py-4",children:e.jsxDEV("div",{className:"flex items-center gap-2 p-4 bg-destructive/10 border border-destructive/20 rounded-md",children:[e.jsxDEV(ke,{className:"h-5 w-5 text-destructive flex-shrink-0"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:600,columnNumber:15},this),e.jsxDEV("p",{className:"text-sm text-destructive font-medium",children:"Warning: This is a permanent action and cannot be reversed."},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:601,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:599,columnNumber:13},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:598,columnNumber:11},this),e.jsxDEV(E,{children:[e.jsxDEV(i,{variant:"outline",onClick:()=>r({type:null,user:null}),"data-testid":"button-cancel-delete",children:"Cancel"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:607,columnNumber:13},this),e.jsxDEV(i,{variant:"destructive",onClick:G,disabled:v.isPending,"data-testid":"button-confirm-delete",children:v.isPending?"Deleting...":"Delete Permanently"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:614,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:606,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:590,columnNumber:9},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:589,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AdminDashboard.tsx",lineNumber:277,columnNumber:5},this)}export{Ze as default};
