import{r as n,e}from"./vendor-react-yzYIzJFU.js";import{c as _,u as p,a as k}from"./vendor-react-query-Dxpktacb.js";import{c as Q,u as X,W as S,f as r,ab as Y,C as o,h as c,i as m,T as Z,a as u,B as L,g as K,x as G,I as W,V as ee}from"./index-BiBisH8X.js";import{T as se}from"./textarea-DoojhZ6C.js";import{A as U,b as E}from"./alert-DQClezAk.js";import{M as j}from"./message-square-AVjZR4xa.js";import{U as ae}from"./user-B9YQAmBR.js";import{U as M}from"./upload-8AnGHi14.js";import{C as te}from"./circle-check-DUGURuAb.js";import{S as ie}from"./star-Cg1sEdgR.js";import"./vendor-mui-DFe-F-Gn.js";import"./vendor-radix-B6etWzp2.js";const ne=Q("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);const re=Q("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);function De(){console.log("[AIAssistantPage] Component mounted");const[R]=X(),[g,f]=n.useState(""),[i,P]=n.useState(null),[h,V]=n.useState(null),[le,O]=n.useState(null),[B,oe]=n.useState(5),y=n.useRef(null),l=_();n.useEffect(()=>{const a=new URLSearchParams(window.location.search).get("q");a&&f(decodeURIComponent(a))},[R]);const{data:A,isLoading:w,error:D}=p({queryKey:["/api/ai-assistant/conversations"]}),{data:$}=p({queryKey:["/api/ai-assistant/conversations",i],enabled:!!i}),{data:t,isLoading:C,error:I}=p({queryKey:["/api/ai-assistant/learning-progress"]}),{data:F}=p({queryKey:["/api/ai-assistant/knowledge"]}),{data:d}=p({queryKey:["/api/ai-assistant/stats"]}),N=k({mutationFn:async s=>{const a=await fetch("/api/ai-assistant/ask",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(s)});if(!a.ok)throw new Error(await a.text());return a.json()},onSuccess:s=>{l.invalidateQueries({queryKey:["/api/ai-assistant/conversations"]}),i&&l.invalidateQueries({queryKey:["/api/ai-assistant/conversations",i]}),l.invalidateQueries({queryKey:["/api/ai-assistant/stats"]}),f("")}}),x=k({mutationFn:async s=>{const a=new FormData;a.append("file",s);const b=await fetch("/api/ai-assistant/knowledge/upload",{method:"POST",credentials:"include",body:a});if(!b.ok)throw new Error(await b.text());return b.json()},onSuccess:()=>{l.invalidateQueries({queryKey:["/api/ai-assistant/knowledge"]}),l.invalidateQueries({queryKey:["/api/ai-assistant/learning-progress"]}),V(null)}}),H=k({mutationFn:async s=>{const a=await fetch(`/api/ai-assistant/conversations/${s.conversationId}/feedback`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(s)});if(!a.ok)throw new Error(await a.text());return a.json()},onSuccess:()=>{O(null),l.invalidateQueries({queryKey:["/api/ai-assistant/stats"]})}}),q=()=>{g.trim()&&N.mutate({question:g,conversationId:i||void 0})},z=()=>{h&&x.mutate(h)},T=(s,a)=>{i&&H.mutate({messageId:s,conversationId:i,rating:B,helpful:a,accurate:a})},v=$?.data?.messages||[];n.useEffect(()=>{y.current?.scrollIntoView({behavior:"smooth"})},[v]);const J=s=>{switch(s){case"mostly_autonomous":return"bg-green-500";case"learning":return"bg-blue-500";case"early_learning":return"bg-yellow-500";default:return"bg-gray-500"}};return w||C?(console.log("[AIAssistantPage] Loading state:",{conversationsLoading:w,progressLoading:C}),e.jsxDEV("div",{className:"flex items-center justify-center h-96",children:e.jsxDEV("div",{className:"text-center space-y-4",children:[e.jsxDEV(S,{className:"h-12 w-12 animate-spin mx-auto text-primary"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:246,columnNumber:11},this),e.jsxDEV("p",{className:"text-muted-foreground",children:"Loading AI Assistant..."},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:247,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:245,columnNumber:9},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:244,columnNumber:7},this)):D||I?(console.log("[AIAssistantPage] Error state:",{conversationsError:D,progressError:I}),e.jsxDEV("div",{className:"container mx-auto p-6",children:e.jsxDEV(U,{variant:"destructive",children:e.jsxDEV(E,{children:e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("p",{className:"font-semibold",children:"Failed to load AI Assistant"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:261,columnNumber:15},this),e.jsxDEV("p",{className:"text-sm",children:D?.message||I?.message||"An unknown error occurred"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:262,columnNumber:15},this),e.jsxDEV(r,{onClick:()=>window.location.reload(),variant:"outline",size:"sm",children:"Retry"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:265,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:260,columnNumber:13},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:259,columnNumber:11},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:258,columnNumber:9},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:257,columnNumber:7},this)):e.jsxDEV("div",{className:"container mx-auto p-6 space-y-6","aria-label":"AI Assistant",children:[e.jsxDEV("div",{className:"flex justify-between items-center",children:e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-3xl font-bold flex items-center gap-2","aria-label":"AI Assistant",children:[e.jsxDEV(Y,{className:"h-8 w-8"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:280,columnNumber:13},this),"AI Assistant"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:279,columnNumber:11},this),e.jsxDEV("p",{className:"text-muted-foreground",children:"Your intelligent business assistant that learns over time"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:283,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:278,columnNumber:9},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:277,columnNumber:7},this),t?.data&&e.jsxDEV(o,{children:[e.jsxDEV(c,{children:e.jsxDEV(m,{className:"flex items-center gap-2",children:[e.jsxDEV(Z,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:294,columnNumber:15},this),"Learning Progress"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:293,columnNumber:13},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:292,columnNumber:11},this),e.jsxDEV(u,{children:e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"text-4xl font-bold",children:[t.data.progress,"%"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:302,columnNumber:19},this),e.jsxDEV(L,{className:J(t.data.status),children:t.data.status.replace("_"," ").toUpperCase()},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:303,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:301,columnNumber:17},this),e.jsxDEV("div",{className:"text-right text-sm",children:e.jsxDEV("div",{children:["External AI: ",t.data.useExternalAi?"Enabled":"Disabled"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:308,columnNumber:19},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:307,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:300,columnNumber:15},this),e.jsxDEV("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsxDEV("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-500",style:{width:`${t.data.progress}%`}},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:313,columnNumber:17},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:312,columnNumber:15},this),e.jsxDEV("div",{className:"grid grid-cols-4 gap-4 text-center",children:[e.jsxDEV("div",{className:"p-3 bg-blue-50 rounded",children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:t.data.stats.learnedQA},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:321,columnNumber:19},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"Learned Q&A"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:322,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:320,columnNumber:17},this),e.jsxDEV("div",{className:"p-3 bg-green-50 rounded",children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:t.data.stats.documents},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:325,columnNumber:19},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"Documents"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:326,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:324,columnNumber:17},this),e.jsxDEV("div",{className:"p-3 bg-purple-50 rounded",children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:t.data.stats.conversations},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:329,columnNumber:19},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"Conversations"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:330,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:328,columnNumber:17},this),e.jsxDEV("div",{className:"p-3 bg-orange-50 rounded",children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:[(t.data.stats.avgConfidence*100).toFixed(0),"%"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:333,columnNumber:19},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"Avg Confidence"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:336,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:332,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:319,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:299,columnNumber:13},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:298,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:291,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxDEV(o,{children:[e.jsxDEV(c,{children:e.jsxDEV(m,{className:"flex items-center gap-2",children:[e.jsxDEV(j,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:349,columnNumber:15},this),"Conversations"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:348,columnNumber:13},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:347,columnNumber:11},this),e.jsxDEV(u,{className:"space-y-2 max-h-96 overflow-y-auto",children:[e.jsxDEV(r,{onClick:()=>P(null),variant:"outline",className:"w-full justify-start","aria-label":"Start new conversation",children:[e.jsxDEV(j,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:360,columnNumber:15},this),"New Conversation"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:354,columnNumber:13},this),A&&A.length===0?e.jsxDEV("div",{className:"py-8 px-4 text-center text-sm text-muted-foreground",children:[e.jsxDEV(j,{className:"h-12 w-12 mx-auto mb-3 opacity-20"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:365,columnNumber:17},this),e.jsxDEV("p",{children:"No conversations yet"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:366,columnNumber:17},this),e.jsxDEV("p",{className:"mt-1",children:"Start chatting to begin"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:367,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:364,columnNumber:15},this):A?.map(s=>e.jsxDEV(r,{onClick:()=>P(s.id),variant:i===s.id?"default":"ghost",className:"w-full justify-start text-left","aria-label":`Open conversation ${s.title}`,children:e.jsxDEV("div",{className:"truncate",children:[s.title,e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:new Date(s.createdAt).toLocaleDateString()},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:380,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:378,columnNumber:19},this)},s.id,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:371,columnNumber:17},this))]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:353,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:346,columnNumber:9},this),e.jsxDEV(o,{className:"lg:col-span-2",children:[e.jsxDEV(c,{children:e.jsxDEV(m,{children:"Chat"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:393,columnNumber:13},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:392,columnNumber:11},this),e.jsxDEV(u,{className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-4 max-h-96 overflow-y-auto p-4 bg-gray-50 rounded","aria-live":"polite",children:[v.length===0?e.jsxDEV("div",{className:"text-center text-muted-foreground py-8",children:[e.jsxDEV(K,{className:"h-12 w-12 mx-auto mb-2 opacity-50"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:400,columnNumber:19},this),e.jsxDEV("p",{children:"Start a conversation by asking a question below"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:401,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:399,columnNumber:17},this):v.map(s=>e.jsxDEV("div",{className:`flex gap-3 ${s.role==="user"?"justify-end":"justify-start"}`,children:e.jsxDEV("div",{className:`flex gap-2 max-w-[80%] ${s.role==="user"?"flex-row-reverse":""}`,children:[e.jsxDEV("div",{className:`flex-shrink-0 ${s.role==="user"?"bg-blue-500":"bg-gray-300"} rounded-full p-2`,"aria-hidden":"true",children:s.role==="user"?e.jsxDEV(ae,{className:"h-4 w-4 text-white"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:409,columnNumber:27},this):e.jsxDEV(K,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:411,columnNumber:27},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:407,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:`p-3 rounded-lg ${s.role==="user"?"bg-blue-500 text-white":"bg-white border"}`,children:[e.jsxDEV("p",{className:"whitespace-pre-wrap","aria-label":s.role==="user"?"User message":"Assistant message",children:s.content},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:420,columnNumber:27},this),s.role==="assistant"&&s.metadata?.sources&&e.jsxDEV("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:s.metadata.sources.map((a,b)=>e.jsxDEV(L,{variant:"outline",className:"text-xs",children:[a.type,": ",(a.relevance*100).toFixed(0),"%"]},b,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:426,columnNumber:35},this))},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:424,columnNumber:31},this),s.confidence&&e.jsxDEV("div",{className:"text-xs mt-1",children:["Confidence: ",(parseFloat(s.confidence)*100).toFixed(0),"%"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:432,columnNumber:33},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:423,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:415,columnNumber:25},this),s.role==="assistant"&&e.jsxDEV("div",{className:"flex gap-2 mt-1",children:[e.jsxDEV(r,{size:"sm",variant:"ghost",onClick:()=>T(s.id,!0),"aria-label":"Mark answer helpful",children:e.jsxDEV(re,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:448,columnNumber:31},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:442,columnNumber:29},this),e.jsxDEV(r,{size:"sm",variant:"ghost",onClick:()=>T(s.id,!1),"aria-label":"Mark answer unhelpful",children:e.jsxDEV(ne,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:456,columnNumber:31},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:450,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:441,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:414,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:406,columnNumber:21},this)},s.id,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:405,columnNumber:19},this)),e.jsxDEV("div",{ref:y},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:465,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:397,columnNumber:13},this),e.jsxDEV("div",{className:"flex gap-2","aria-label":"Ask a question",children:[e.jsxDEV(se,{placeholder:"Ask me anything about your business...",value:g,onChange:s=>f(s.target.value),onKeyDown:s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),q())},rows:3,className:"flex-1","aria-label":"Your question"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:470,columnNumber:15},this),e.jsxDEV(r,{onClick:q,disabled:!g.trim()||N.isPending,"aria-label":"Send message",children:N.isPending?e.jsxDEV(S,{className:"h-4 w-4 animate-spin"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:490,columnNumber:19},this):e.jsxDEV(G,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:492,columnNumber:19},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:484,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:469,columnNumber:13},this),N.isError&&e.jsxDEV(U,{variant:"destructive",children:e.jsxDEV(E,{children:N.error?.message||"Failed to send message"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:499,columnNumber:17},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:498,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:395,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:391,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:344,columnNumber:7},this),e.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxDEV(o,{children:[e.jsxDEV(c,{children:e.jsxDEV(m,{className:"flex items-center gap-2",children:[e.jsxDEV(M,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:513,columnNumber:15},this),"Upload Knowledge"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:512,columnNumber:13},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:511,columnNumber:11},this),e.jsxDEV(u,{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV(W,{type:"file",accept:".pdf,.docx,.doc,.txt,.csv,.json",onChange:s=>V(s.target.files?.[0]||null)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:519,columnNumber:15},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-2",children:"Supported: PDF, DOCX, DOC, TXT, CSV, JSON (Max 10MB)"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:524,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:518,columnNumber:13},this),e.jsxDEV(r,{onClick:z,disabled:!h||x.isPending,className:"w-full",children:x.isPending?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(S,{className:"h-4 w-4 mr-2 animate-spin"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:535,columnNumber:19},this),"Uploading..."]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:534,columnNumber:17},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(M,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:540,columnNumber:19},this),"Upload Document"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:539,columnNumber:17},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:528,columnNumber:13},this),x.isSuccess&&e.jsxDEV(U,{children:[e.jsxDEV(te,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:547,columnNumber:17},this),e.jsxDEV(E,{children:"Document uploaded and processed successfully!"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:548,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:546,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:517,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:510,columnNumber:9},this),e.jsxDEV(o,{children:[e.jsxDEV(c,{children:e.jsxDEV(m,{className:"flex items-center gap-2",children:[e.jsxDEV(ee,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:559,columnNumber:15},this),"Knowledge Base"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:558,columnNumber:13},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:557,columnNumber:11},this),e.jsxDEV(u,{children:e.jsxDEV("div",{className:"space-y-2 max-h-64 overflow-y-auto","aria-label":"Knowledge base documents",children:F?.data?.length===0?e.jsxDEV("p",{className:"text-muted-foreground text-center py-4",children:"No documents uploaded yet"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:566,columnNumber:17},this):F?.data?.map(s=>e.jsxDEV("div",{className:"p-3 border rounded flex justify-between items-center",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-medium",children:s.filename},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:573,columnNumber:23},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:new Date(s.createdAt).toLocaleDateString()},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:574,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:572,columnNumber:21},this),e.jsxDEV(L,{children:s.category||"General"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:578,columnNumber:21},this)]},s.id,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:571,columnNumber:19},this))},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:564,columnNumber:13},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:563,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:556,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:509,columnNumber:7},this),d?.data&&e.jsxDEV(o,{children:[e.jsxDEV(c,{children:e.jsxDEV(m,{children:"Usage Statistics"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:591,columnNumber:13},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:590,columnNumber:11},this),e.jsxDEV(u,{children:e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxDEV("div",{className:"p-4 bg-blue-50 rounded",children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:d.data.totalConversations},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:596,columnNumber:17},this),e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Total Conversations"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:597,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:595,columnNumber:15},this),e.jsxDEV("div",{className:"p-4 bg-green-50 rounded",children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:d.data.localAnswers},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:600,columnNumber:17},this),e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Local Answers"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:601,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:599,columnNumber:15},this),e.jsxDEV("div",{className:"p-4 bg-purple-50 rounded",children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:[d.data.autonomyRate.toFixed(0),"%"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:604,columnNumber:17},this),e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Autonomy Rate"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:605,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:603,columnNumber:15},this),e.jsxDEV("div",{className:"p-4 bg-orange-50 rounded",children:[e.jsxDEV("div",{className:"text-2xl font-bold flex items-center gap-1",children:[e.jsxDEV(ie,{className:"h-5 w-5 fill-yellow-400 text-yellow-400"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:609,columnNumber:19},this),d.data.avgUserRating.toFixed(1)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:608,columnNumber:17},this),e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Avg Rating"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:612,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:607,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:594,columnNumber:13},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:593,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:589,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/AIAssistantPage.tsx",lineNumber:276,columnNumber:5},this)}export{De as default};
