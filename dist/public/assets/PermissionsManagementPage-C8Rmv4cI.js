import{r as t,e}from"./vendor-react-yzYIzJFU.js";import{c as ge,u as q,a as U}from"./vendor-react-query-Dxpktacb.js";import{c as Ne,e as be,G as pe,a2 as V,a3 as M,f as l,a4 as A,a5 as Q,a6 as B,a7 as H,a8 as _,C as y,h as C,i as w,d as de,j as $,a as R,U as he,$ as Pe,I as xe,B as T,Y as g}from"./index-BiBisH8X.js";import{T as fe,a as De,b as z,c as N,d as ve,e as b}from"./table-cFqY84xs.js";import{S as p,a as d,b as h,c as P,d as c}from"./select-BquPdUcS.js";import{L as D}from"./label-DDyL8AZL.js";import{C as Se}from"./checkbox-BO3-axzS.js";import{P as ke}from"./plus-CbARstPA.js";import{L as Y}from"./lock-ykft9mcf.js";import{S as Ie}from"./save-IQad8R1X.js";import"./vendor-mui-DFe-F-Gn.js";import"./vendor-radix-B6etWzp2.js";const J=Ne("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),W=[{value:"ecp",label:"Eye Care Professional"},{value:"lab_tech",label:"Lab Technician"},{value:"engineer",label:"Engineer"},{value:"supplier",label:"Supplier"},{value:"admin",label:"Admin"},{value:"company_admin",label:"Company Admin"},{value:"platform_admin",label:"Platform Admin"}];function Ke(){const{toast:o}=be(),{user:v}=pe(),S=ge(),[k,X]=t.useState(""),[I,Z]=t.useState("all"),[n,m]=t.useState(null),[O,x]=t.useState(!1),[ee,L]=t.useState(!1),[r,f]=t.useState(""),[u,K]=t.useState(null),[F,E]=t.useState(new Set),{data:j,isLoading:se}=q({queryKey:["/api/permissions"],queryFn:async()=>(await(await g("GET","/api/permissions")).json()).data||{}}),{data:G,isLoading:ae}=q({queryKey:["/api/users/company"],queryFn:async()=>await(await g("GET",`/api/users/company/${v?.companyId}`)).json()||[],enabled:!!v?.companyId}),ie=U({mutationFn:async({userId:s,permissionKey:a})=>await(await g("POST","/api/permissions/grant",{userId:s,permissionKey:a})).json(),onSuccess:()=>{S.invalidateQueries({queryKey:["/api/users/company"]}),o({title:"Permission Granted",description:"The permission has been granted successfully."}),x(!1),m(null),f("")},onError:s=>{o({title:"Error",description:s.message||"Failed to grant permission",variant:"destructive"})}}),ne=U({mutationFn:async({userId:s,permissionKey:a})=>await(await g("POST","/api/permissions/revoke",{userId:s,permissionKey:a})).json(),onSuccess:()=>{S.invalidateQueries({queryKey:["/api/users/company"]}),o({title:"Permission Revoked",description:"The permission has been revoked successfully."}),L(!1),m(null),f("")},onError:s=>{o({title:"Error",description:s.message||"Failed to revoke permission",variant:"destructive"})}}),re=U({mutationFn:async({role:s,permissionKeys:a})=>await(await g("PUT",`/api/permissions/role/${v?.companyId}`,{role:s,permissionKeys:a})).json(),onSuccess:()=>{S.invalidateQueries({queryKey:["/api/users/company"]}),o({title:"Role Permissions Updated",description:"The role permissions have been updated successfully."}),K(null),E(new Set)},onError:s=>{o({title:"Error",description:s.message||"Failed to update role permissions",variant:"destructive"})}}),te=()=>{n&&r&&ie.mutate({userId:n,permissionKey:r})},le=()=>{n&&r&&ne.mutate({userId:n,permissionKey:r})},me=()=>{u&&re.mutate({role:u,permissionKeys:Array.from(F)})},oe=s=>{E(a=>{const i=new Set(a);return i.has(s)?i.delete(s):i.add(s),i})},ce=G?.filter(s=>{const a=s.userName.toLowerCase().includes(k.toLowerCase())||s.email.toLowerCase().includes(k.toLowerCase()),i=I==="all"||s.role===I;return a&&i}),ue=Object.entries(j||{}).flatMap(([s,a])=>a.map(i=>({...i,category:s})));return se||ae?e.jsxDEV("div",{className:"flex items-center justify-center h-96",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:235,columnNumber:11},this),e.jsxDEV("p",{className:"mt-4 text-muted-foreground",children:"Loading permissions..."},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:236,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:234,columnNumber:9},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:233,columnNumber:7},this):e.jsxDEV("div",{className:"container mx-auto space-y-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-3xl font-bold",children:"Permissions Management"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:246,columnNumber:11},this),e.jsxDEV("p",{className:"text-muted-foreground",children:"Manage user permissions and role-based access control"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:247,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:245,columnNumber:9},this),e.jsxDEV(V,{open:O,onOpenChange:x,children:[e.jsxDEV(M,{asChild:!0,children:e.jsxDEV(l,{children:[e.jsxDEV(ke,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:254,columnNumber:15},this),"Grant Permission"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:253,columnNumber:13},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:252,columnNumber:11},this),e.jsxDEV(A,{children:[e.jsxDEV(Q,{children:[e.jsxDEV(B,{children:"Grant Permission"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:260,columnNumber:15},this),e.jsxDEV(H,{children:"Grant a custom permission to a user"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:261,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:259,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV(D,{children:"User"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:267,columnNumber:17},this),e.jsxDEV(p,{value:n||"",onValueChange:m,children:[e.jsxDEV(d,{children:e.jsxDEV(h,{placeholder:"Select user"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:270,columnNumber:21},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:269,columnNumber:19},this),e.jsxDEV(P,{children:G?.map(s=>e.jsxDEV(c,{value:s.userId,children:[s.userName," (",s.email,")"]},s.userId,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:274,columnNumber:23},this))},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:272,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:268,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:266,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV(D,{children:"Permission"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:282,columnNumber:17},this),e.jsxDEV(p,{value:r,onValueChange:f,children:[e.jsxDEV(d,{children:e.jsxDEV(h,{placeholder:"Select permission"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:285,columnNumber:21},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:284,columnNumber:19},this),e.jsxDEV(P,{children:ue.map(s=>e.jsxDEV(c,{value:s.permissionKey,children:s.permissionName},s.permissionKey,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:289,columnNumber:23},this))},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:287,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:283,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:281,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:265,columnNumber:13},this),e.jsxDEV(_,{children:[e.jsxDEV(l,{variant:"outline",onClick:()=>x(!1),children:"Cancel"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:298,columnNumber:15},this),e.jsxDEV(l,{onClick:te,disabled:!n||!r,children:[e.jsxDEV(Y,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:302,columnNumber:17},this),"Grant"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:301,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:297,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:258,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:251,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:244,columnNumber:7},this),e.jsxDEV(y,{children:[e.jsxDEV(C,{children:[e.jsxDEV(w,{className:"flex items-center gap-2",children:[e.jsxDEV(de,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:314,columnNumber:13},this),"Role Permissions"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:313,columnNumber:11},this),e.jsxDEV($,{children:"Configure default permissions for each role"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:317,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:312,columnNumber:9},this),e.jsxDEV(R,{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex items-center gap-4",children:[e.jsxDEV(p,{value:u||"",onValueChange:s=>{K(s),E(new Set)},children:[e.jsxDEV(d,{className:"w-64",children:e.jsxDEV(h,{placeholder:"Select role to edit"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:330,columnNumber:17},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:329,columnNumber:15},this),e.jsxDEV(P,{children:W.map(s=>e.jsxDEV(c,{value:s.value,children:s.label},s.value,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:334,columnNumber:19},this))},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:332,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:323,columnNumber:13},this),u&&e.jsxDEV(l,{onClick:me,children:[e.jsxDEV(Ie,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:342,columnNumber:17},this),"Save Role Permissions"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:341,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:322,columnNumber:11},this),u&&j&&e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-4",children:Object.entries(j).map(([s,a])=>e.jsxDEV(y,{children:[e.jsxDEV(C,{className:"pb-3",children:e.jsxDEV(w,{className:"text-sm font-medium",children:s},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:353,columnNumber:21},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:352,columnNumber:19},this),e.jsxDEV(R,{className:"space-y-2",children:a.map(i=>e.jsxDEV("div",{className:"flex items-start space-x-2",children:[e.jsxDEV(Se,{id:i.permissionKey,checked:F.has(i.permissionKey),onCheckedChange:()=>oe(i.permissionKey)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:358,columnNumber:25},this),e.jsxDEV(D,{htmlFor:i.permissionKey,className:"text-sm font-normal cursor-pointer",children:i.permissionName},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:363,columnNumber:25},this)]},i.permissionKey,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:357,columnNumber:23},this))},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:355,columnNumber:19},this)]},s,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:351,columnNumber:17},this))},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:349,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:321,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:311,columnNumber:7},this),e.jsxDEV(y,{children:[e.jsxDEV(C,{children:[e.jsxDEV(w,{className:"flex items-center gap-2",children:[e.jsxDEV(he,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:383,columnNumber:13},this),"User Permissions"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:382,columnNumber:11},this),e.jsxDEV($,{children:"View and manage individual user permissions"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:386,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:381,columnNumber:9},this),e.jsxDEV(R,{children:[e.jsxDEV("div",{className:"flex gap-4 mb-4",children:[e.jsxDEV("div",{className:"relative flex-1",children:[e.jsxDEV(Pe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:391,columnNumber:15},this),e.jsxDEV(xe,{placeholder:"Search users...",value:k,onChange:s=>X(s.target.value),className:"pl-10"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:392,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:390,columnNumber:13},this),e.jsxDEV(p,{value:I,onValueChange:Z,children:[e.jsxDEV(d,{className:"w-48",children:e.jsxDEV(h,{placeholder:"Filter by role"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:401,columnNumber:17},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:400,columnNumber:15},this),e.jsxDEV(P,{children:[e.jsxDEV(c,{value:"all",children:"All Roles"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:404,columnNumber:17},this),W.map(s=>e.jsxDEV(c,{value:s.value,children:s.label},s.value,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:406,columnNumber:19},this))]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:403,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:399,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:389,columnNumber:11},this),e.jsxDEV(fe,{children:[e.jsxDEV(De,{children:e.jsxDEV(z,{children:[e.jsxDEV(N,{children:"User"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:417,columnNumber:17},this),e.jsxDEV(N,{children:"Email"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:418,columnNumber:17},this),e.jsxDEV(N,{children:"Role"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:419,columnNumber:17},this),e.jsxDEV(N,{children:"Permissions"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:420,columnNumber:17},this),e.jsxDEV(N,{className:"text-right",children:"Actions"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:421,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:416,columnNumber:15},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:415,columnNumber:13},this),e.jsxDEV(ve,{children:ce?.map(s=>e.jsxDEV(z,{children:[e.jsxDEV(b,{className:"font-medium",children:s.userName},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:427,columnNumber:19},this),e.jsxDEV(b,{children:s.email},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:428,columnNumber:19},this),e.jsxDEV(b,{children:e.jsxDEV(T,{variant:"outline",children:s.role},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:430,columnNumber:21},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:429,columnNumber:19},this),e.jsxDEV(b,{children:e.jsxDEV("div",{className:"flex flex-wrap gap-1",children:[s.permissions.slice(0,3).map(a=>e.jsxDEV(T,{variant:"secondary",className:"text-xs",children:a.split(".").pop()},a,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:435,columnNumber:25},this)),s.permissions.length>3&&e.jsxDEV(T,{variant:"secondary",className:"text-xs",children:["+",s.permissions.length-3," more"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:440,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:433,columnNumber:21},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:432,columnNumber:19},this),e.jsxDEV(b,{className:"text-right",children:e.jsxDEV("div",{className:"flex justify-end gap-2",children:[e.jsxDEV(V,{open:O&&n===s.userId,onOpenChange:a=>{x(a),m(a?s.userId:null)},children:e.jsxDEV(M,{asChild:!0,children:e.jsxDEV(l,{variant:"ghost",size:"sm",children:e.jsxDEV(Y,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:455,columnNumber:29},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:454,columnNumber:27},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:453,columnNumber:25},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:448,columnNumber:23},this),e.jsxDEV(V,{open:ee&&n===s.userId,onOpenChange:a=>{L(a),m(a?s.userId:null)},children:[e.jsxDEV(M,{asChild:!0,children:e.jsxDEV(l,{variant:"ghost",size:"sm",children:e.jsxDEV(J,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:466,columnNumber:29},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:465,columnNumber:27},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:464,columnNumber:25},this),e.jsxDEV(A,{children:[e.jsxDEV(Q,{children:[e.jsxDEV(B,{children:"Revoke Permission"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:471,columnNumber:29},this),e.jsxDEV(H,{children:["Revoke a permission from ",s.userName]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:472,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:470,columnNumber:27},this),e.jsxDEV("div",{children:[e.jsxDEV(D,{children:"Permission"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:477,columnNumber:29},this),e.jsxDEV(p,{value:r,onValueChange:f,children:[e.jsxDEV(d,{children:e.jsxDEV(h,{placeholder:"Select permission to revoke"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:480,columnNumber:33},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:479,columnNumber:31},this),e.jsxDEV(P,{children:s.permissions.map(a=>e.jsxDEV(c,{value:a,children:a},a,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:484,columnNumber:35},this))},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:482,columnNumber:31},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:478,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:476,columnNumber:27},this),e.jsxDEV(_,{children:[e.jsxDEV(l,{variant:"outline",onClick:()=>L(!1),children:"Cancel"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:492,columnNumber:29},this),e.jsxDEV(l,{variant:"destructive",onClick:le,disabled:!r,children:[e.jsxDEV(J,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:500,columnNumber:31},this),"Revoke"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:495,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:491,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:469,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:459,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:447,columnNumber:21},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:446,columnNumber:19},this)]},s.userId,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:426,columnNumber:17},this))},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:424,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:414,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:388,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:380,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PermissionsManagementPage.tsx",lineNumber:243,columnNumber:5},this)}export{Ke as default};
