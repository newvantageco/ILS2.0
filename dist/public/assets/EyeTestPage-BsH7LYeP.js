import{r as f,e}from"./vendor-react-yzYIzJFU.js";import{u as K,a as $}from"./vendor-react-query-Dxpktacb.js";import{c as J,C as L,h as I,i as j,E as G,a as U,f as g,j as w,an as ee,e as se,L as te,B as z,p as ie,q as ae,r as A,al as le,V as ne,t as F,I as N,a1 as W,Y as _}from"./index-BiBisH8X.js";import{L as o}from"./label-DDyL8AZL.js";import{T as re}from"./textarea-DoojhZ6C.js";import{S as oe,a as ce,b as me,c as ue,d as de}from"./select-BquPdUcS.js";import{R as pe,a as be}from"./radio-group-D19d1obH.js";import{P as H}from"./palette-CXD4BRLU.js";import{A as Ne}from"./arrow-left-vOI8T5Pv.js";import{F as xe}from"./file-check-DXTRE5jT.js";import{D as he}from"./door-open-BafJ_vvl.js";import{W as fe}from"./wifi-ClHTJIKn.js";import{S as De}from"./save-IQad8R1X.js";import{C as ye}from"./circle-check-DUGURuAb.js";import"./vendor-mui-DFe-F-Gn.js";import"./vendor-radix-B6etWzp2.js";const q=J("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]),X=[{size:"6/60",letters:"E",fontSize:"120px"},{size:"6/36",letters:"F P",fontSize:"80px"},{size:"6/24",letters:"T O Z",fontSize:"60px"},{size:"6/18",letters:"L P E D",fontSize:"48px"},{size:"6/12",letters:"P E C F D",fontSize:"36px"},{size:"6/9",letters:"E D F C Z P",fontSize:"28px"},{size:"6/6",letters:"F E L O P Z D",fontSize:"24px"},{size:"6/5",letters:"D E F P O T E C",fontSize:"20px"}];function Y({eye:S,onResult:m,initialValue:E}){const[p,r]=f.useState(E||""),y=i=>{r(i),m(i)};return e.jsxDEV(L,{children:[e.jsxDEV(I,{children:e.jsxDEV(j,{className:"flex items-center gap-2",children:[e.jsxDEV(G,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualAcuityChart.tsx",lineNumber:37,columnNumber:11},this),"Visual Acuity - ",S==="OD"?"Right Eye":"Left Eye"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualAcuityChart.tsx",lineNumber:36,columnNumber:9},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualAcuityChart.tsx",lineNumber:35,columnNumber:7},this),e.jsxDEV(U,{className:"space-y-4",children:[e.jsxDEV("div",{className:"bg-white p-6 rounded-lg border-2 border-border min-h-[400px] flex flex-col items-center justify-center",children:e.jsxDEV("div",{className:"space-y-4 text-center",children:X.map(i=>e.jsxDEV("div",{className:"space-y-1",children:[e.jsxDEV("div",{style:{fontSize:i.fontSize},className:"font-mono font-bold text-black tracking-wider",children:i.letters},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualAcuityChart.tsx",lineNumber:46,columnNumber:17},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:i.size},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualAcuityChart.tsx",lineNumber:52,columnNumber:17},this)]},i.size,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualAcuityChart.tsx",lineNumber:45,columnNumber:15},this))},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualAcuityChart.tsx",lineNumber:43,columnNumber:11},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualAcuityChart.tsx",lineNumber:42,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV(o,{children:"Patient can read up to:"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualAcuityChart.tsx",lineNumber:59,columnNumber:11},this),e.jsxDEV(pe,{value:p,onValueChange:y,children:X.map(i=>e.jsxDEV("div",{className:"flex items-center space-x-2",children:[e.jsxDEV(be,{value:i.size,id:`${S}-${i.size}`},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualAcuityChart.tsx",lineNumber:63,columnNumber:17},this),e.jsxDEV(o,{htmlFor:`${S}-${i.size}`,className:"cursor-pointer",children:[i.size," - ",i.letters]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualAcuityChart.tsx",lineNumber:64,columnNumber:17},this)]},i.size,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualAcuityChart.tsx",lineNumber:62,columnNumber:15},this))},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualAcuityChart.tsx",lineNumber:60,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualAcuityChart.tsx",lineNumber:58,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualAcuityChart.tsx",lineNumber:41,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualAcuityChart.tsx",lineNumber:34,columnNumber:5},this)}const D=[{id:1,number:"12",correctAnswer:"12",description:"Control Plate"},{id:2,number:"8",correctAnswer:"8",description:"Red-Green Deficiency Test"},{id:3,number:"6",correctAnswer:"6",description:"Red-Green Deficiency Test"},{id:4,number:"29",correctAnswer:"29",description:"Red-Green Deficiency Test"},{id:5,number:"57",correctAnswer:"57",description:"Red-Green Deficiency Test"},{id:6,number:"5",correctAnswer:"5",description:"Red-Green Deficiency Test"},{id:7,number:"3",correctAnswer:"3",description:"Red-Green Deficiency Test"},{id:8,number:"15",correctAnswer:"15",description:"Red-Green Deficiency Test"},{id:9,number:"74",correctAnswer:"74",description:"Red-Green Deficiency Test"},{id:10,number:"2",correctAnswer:"2",description:"Red-Green Deficiency Test"}];function ge({onComplete:S}){const[m,E]=f.useState(0),[p,r]=f.useState([]),[y,i]=f.useState(""),[C,x]=f.useState(!1),V=()=>{const u=D[m],a=y===u.correctAnswer,b=[...p,{plateId:u.id,userAnswer:y,correct:a}];if(r(b),i(""),m<D.length-1)E(m+1);else{const d=b.filter(c=>c.correct).length,s=b.length-d;let l="";d===D.length?l="Normal color vision":d>=D.length-2?l="Borderline - recommend full color vision assessment":d>=D.length-4?l="Mild color vision deficiency detected":l="Significant color vision deficiency detected - refer for specialist assessment";const h={totalPlates:D.length,correctAnswers:d,incorrectAnswers:s,interpretation:l,details:b.map(c=>({plateId:c.plateId,correct:c.correct}))};x(!0),S(h)}},T=()=>{const u=D[m],a=[...p,{plateId:u.id,userAnswer:"skipped",correct:!1}];r(a),m<D.length-1&&E(m+1)},P=()=>{E(0),r([]),i(""),x(!1)};if(C){const u=p.filter(b=>b.correct).length,a=u/D.length*100;return e.jsxDEV(L,{children:[e.jsxDEV(I,{children:e.jsxDEV(j,{className:"flex items-center gap-2",children:[e.jsxDEV(H,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:122,columnNumber:13},this),"Color Vision Test Results"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:121,columnNumber:11},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:120,columnNumber:9},this),e.jsxDEV(U,{className:"space-y-4",children:[e.jsxDEV("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"text-3xl font-bold text-green-600",children:u},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:129,columnNumber:15},this),e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Correct"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:130,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:128,columnNumber:13},this),e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"text-3xl font-bold text-red-600",children:p.length-u},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:133,columnNumber:15},this),e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Incorrect"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:136,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:132,columnNumber:13},this),e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"text-3xl font-bold",children:[a.toFixed(0),"%"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:139,columnNumber:15},this),e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Score"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:140,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:138,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:127,columnNumber:11},this),e.jsxDEV("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsxDEV("p",{className:"font-medium",children:"Interpretation:"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:145,columnNumber:13},this),e.jsxDEV("p",{className:"text-sm mt-1",children:p.filter(b=>b.correct).length===D.length?"Normal color vision":p.filter(b=>b.correct).length>=D.length-2?"Borderline - recommend full assessment":"Color vision deficiency detected"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:146,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:144,columnNumber:11},this),e.jsxDEV("div",{className:"flex gap-2",children:e.jsxDEV(g,{onClick:P,variant:"outline",className:"flex-1",children:"Repeat Test"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:156,columnNumber:13},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:155,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:126,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:119,columnNumber:7},this)}const v=D[m];return e.jsxDEV(L,{children:[e.jsxDEV(I,{children:[e.jsxDEV(j,{className:"flex items-center gap-2",children:[e.jsxDEV(H,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:171,columnNumber:11},this),"Ishihara Color Blindness Test"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:170,columnNumber:9},this),e.jsxDEV(w,{children:["Plate ",m+1," of ",D.length," - ",v.description]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:174,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:169,columnNumber:7},this),e.jsxDEV(U,{className:"space-y-4",children:[e.jsxDEV("div",{className:"bg-gradient-to-br from-gray-200 to-gray-300 p-8 rounded-lg border-2 border-border aspect-square flex items-center justify-center",children:e.jsxDEV("div",{className:"relative w-full h-full max-w-md max-h-md",children:[e.jsxDEV("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxDEV("div",{className:"text-9xl font-bold opacity-30",style:{color:"#8B4513"},children:v.number},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:183,columnNumber:15},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:182,columnNumber:13},this),e.jsxDEV("div",{className:"absolute inset-0",children:e.jsxDEV("svg",{viewBox:"0 0 400 400",className:"w-full h-full",children:[Array.from({length:200}).map((u,a)=>{const b=Math.random()*400,d=Math.random()*400,s=Math.random()*8+4,l=["#90EE90","#98FB98","#00FF00","#32CD32"],h=l[Math.floor(Math.random()*l.length)];return e.jsxDEV("circle",{cx:b,cy:d,r:s,fill:h},a,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:196,columnNumber:26},this)}),Array.from({length:80}).map((u,a)=>{const b=a/80*Math.PI*2,d=120,s=200+Math.cos(b)*d+(Math.random()-.5)*40,l=200+Math.sin(b)*d+(Math.random()-.5)*40,h=Math.random()*8+4,c=["#FF6B6B","#FF8E8E","#FFB3B3"],k=c[Math.floor(Math.random()*c.length)];return e.jsxDEV("circle",{cx:s,cy:l,r:h,fill:k},`num-${a}`,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:207,columnNumber:26},this)})]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:188,columnNumber:15},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:187,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:180,columnNumber:11},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:179,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"text-sm font-medium",children:"What number do you see?"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:216,columnNumber:13},this),e.jsxDEV("input",{type:"text",value:y,onChange:u=>i(u.target.value),className:"w-full px-3 py-2 border rounded-md",placeholder:"Enter the number you see",autoFocus:!0,onKeyPress:u=>{u.key==="Enter"&&y&&V()}},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:217,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:215,columnNumber:11},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(g,{onClick:V,disabled:!y,className:"flex-1",children:"Submit Answer"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:233,columnNumber:13},this),e.jsxDEV(g,{onClick:T,variant:"outline",children:"Can't See Number"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:240,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:232,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:214,columnNumber:9},this),e.jsxDEV("div",{className:"flex gap-1 justify-center",children:D.map((u,a)=>e.jsxDEV("div",{className:`w-2 h-2 rounded-full ${a<m?p[a]?.correct?"bg-green-500":"bg-red-500":a===m?"bg-primary":"bg-muted"}`},a,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:248,columnNumber:13},this))},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:246,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:178,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/ColorBlindnessTest.tsx",lineNumber:168,columnNumber:5},this)}function Q({eye:S,onComplete:m}){const[E,p]=f.useState(!1),[r,y]=f.useState(0),[i,C]=f.useState(()=>{const s=[];return[{radius:40,count:4},{radius:80,count:8},{radius:120,count:12},{radius:160,count:16}].forEach(({radius:k,count:O})=>{for(let R=0;R<O;R++){const B=R/O*Math.PI*2;s.push({x:200+Math.cos(B)*k,y:200+Math.sin(B)*k,seen:null})}}),s.push({x:200,y:200,seen:null}),s}),[x,V]=f.useState(!1),T=()=>{p(!0),P()},P=()=>{if(r>=i.length){m(i);return}const s=Math.random()*600+200;setTimeout(()=>{V(!0)},s)},v=()=>{const s=[...i];s[r]={...s[r],seen:!0},C(s),V(!1),r<i.length-1?(y(r+1),P()):m(s)},u=()=>{const s=[...i];s[r]={...s[r],seen:!1},C(s),V(!1),r<i.length-1?(y(r+1),P()):m(s)},a=()=>{p(!1),y(0),C(i.map(s=>({...s,seen:null}))),V(!1)},b=()=>{const s=i.filter(c=>c.seen!==null),l=s.filter(c=>c.seen===!0),h=s.filter(c=>c.seen===!1);return{total:s.length,seen:l.length,missed:h.length}};if(i.every(s=>s.seen!==null)){const s=b(),l=s.seen/s.total*100;return e.jsxDEV(L,{children:[e.jsxDEV(I,{children:e.jsxDEV(j,{className:"flex items-center gap-2",children:[e.jsxDEV(q,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:134,columnNumber:13},this),"Visual Field Test Results - ",S==="OD"?"Right Eye":"Left Eye"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:133,columnNumber:11},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:132,columnNumber:9},this),e.jsxDEV(U,{className:"space-y-4",children:[e.jsxDEV("div",{className:"relative w-full aspect-square max-w-md mx-auto bg-black rounded-lg border-2 border-border",children:e.jsxDEV("svg",{viewBox:"0 0 400 400",className:"w-full h-full",children:[e.jsxDEV("line",{x1:"200",y1:"0",x2:"200",y2:"400",stroke:"#333",strokeWidth:"1"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:142,columnNumber:15},this),e.jsxDEV("line",{x1:"0",y1:"200",x2:"400",y2:"200",stroke:"#333",strokeWidth:"1"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:143,columnNumber:15},this),e.jsxDEV("circle",{cx:"200",cy:"200",r:"160",fill:"none",stroke:"#333",strokeWidth:"1"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:144,columnNumber:15},this),e.jsxDEV("circle",{cx:"200",cy:"200",r:"120",fill:"none",stroke:"#333",strokeWidth:"1"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:145,columnNumber:15},this),e.jsxDEV("circle",{cx:"200",cy:"200",r:"80",fill:"none",stroke:"#333",strokeWidth:"1"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:146,columnNumber:15},this),e.jsxDEV("circle",{cx:"200",cy:"200",r:"40",fill:"none",stroke:"#333",strokeWidth:"1"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:147,columnNumber:15},this),e.jsxDEV("circle",{cx:"200",cy:"200",r:"3",fill:"red"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:150,columnNumber:15},this),i.map((h,c)=>e.jsxDEV("circle",{cx:h.x,cy:h.y,r:"6",fill:h.seen===!0?"#22c55e":h.seen===!1?"#ef4444":"#666",opacity:h.seen===null?.3:.8},c,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:154,columnNumber:17},this))]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:140,columnNumber:13},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:139,columnNumber:11},this),e.jsxDEV("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-2xl font-bold",children:s.total},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:168,columnNumber:15},this),e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Points Tested"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:169,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:167,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-2xl font-bold text-green-600",children:s.seen},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:172,columnNumber:15},this),e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Seen"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:173,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:171,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-2xl font-bold text-red-600",children:s.missed},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:176,columnNumber:15},this),e.jsxDEV("div",{className:"text-sm text-muted-foreground",children:"Missed"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:177,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:175,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:166,columnNumber:11},this),e.jsxDEV("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsxDEV("p",{className:"font-medium",children:["Visual Field Score: ",l.toFixed(1),"%"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:182,columnNumber:13},this),e.jsxDEV("p",{className:"text-sm mt-1 text-muted-foreground",children:l>=95?"Normal visual field":l>=85?"Mild defects detected":l>=70?"Moderate defects - recommend further investigation":"Significant defects - refer to specialist"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:183,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:181,columnNumber:11},this),e.jsxDEV(g,{onClick:a,variant:"outline",className:"w-full",children:"Repeat Test"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:194,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:138,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:131,columnNumber:7},this)}return e.jsxDEV(L,{children:[e.jsxDEV(I,{children:[e.jsxDEV(j,{className:"flex items-center gap-2",children:[e.jsxDEV(q,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:206,columnNumber:11},this),"Visual Field Test - ",S==="OD"?"Right Eye":"Left Eye"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:205,columnNumber:9},this),e.jsxDEV(w,{children:E?`Point ${r+1} of ${i.length}`:"Cover the other eye and focus on the red central point. Press the button when you see a flash."},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:209,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:204,columnNumber:7},this),e.jsxDEV(U,{className:"space-y-4",children:[e.jsxDEV("div",{className:"relative w-full aspect-square max-w-md mx-auto bg-black rounded-lg border-2 border-border overflow-hidden",children:e.jsxDEV("svg",{viewBox:"0 0 400 400",className:"w-full h-full",children:[e.jsxDEV("circle",{cx:"200",cy:"200",r:"4",fill:"red"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:219,columnNumber:13},this),x&&r<i.length&&e.jsxDEV("circle",{cx:i[r].x,cy:i[r].y,r:"8",fill:"white",className:"animate-pulse"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:223,columnNumber:15},this),i.slice(0,r).map((s,l)=>e.jsxDEV("circle",{cx:s.x,cy:s.y,r:"3",fill:s.seen?"#22c55e":"#ef4444",opacity:"0.3"},l,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:234,columnNumber:15},this))]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:217,columnNumber:11},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:216,columnNumber:9},this),E?e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(g,{onClick:v,className:"flex-1",variant:"default",children:"I See It"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:254,columnNumber:15},this),e.jsxDEV(g,{onClick:u,className:"flex-1",variant:"outline",children:"Don't See It"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:257,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:253,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-center text-muted-foreground",children:"Keep your eye focused on the red center point"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:261,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:252,columnNumber:11},this):e.jsxDEV(g,{onClick:T,className:"w-full",children:[e.jsxDEV(G,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:248,columnNumber:13},this),"Start Test"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:247,columnNumber:11},this),e.jsxDEV("div",{className:"flex gap-1 justify-center flex-wrap",children:i.map((s,l)=>e.jsxDEV("div",{className:`w-2 h-2 rounded-full ${s.seen===!0?"bg-green-500":s.seen===!1?"bg-red-500":l===r&&E?"bg-primary":"bg-muted"}`},l,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:269,columnNumber:13},this))},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:267,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:215,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/eye-test/VisualFieldTest.tsx",lineNumber:203,columnNumber:5},this)}const Ee=[{id:"comprehensive",name:"Comprehensive Eye Examination",description:"Full eye examination with all standard tests",sections:[{id:"history",title:"Patient History",fields:[{id:"chiefComplaint",label:"Chief Complaint",type:"textarea",placeholder:"Primary reason for visit"},{id:"symptoms",label:"Symptoms",type:"textarea",placeholder:"Current symptoms"},{id:"medicalHistory",label:"Medical History",type:"textarea",placeholder:"Relevant medical conditions"},{id:"medications",label:"Current Medications",type:"textarea",placeholder:"List all medications"},{id:"allergies",label:"Allergies",type:"text",placeholder:"Known allergies"}]},{id:"visual-acuity",title:"Visual Acuity",fields:[{id:"vaODUnaided",label:"VA OD Unaided",type:"text",placeholder:"6/6"},{id:"vaOSUnaided",label:"VA OS Unaided",type:"text",placeholder:"6/6"},{id:"vaODAided",label:"VA OD Aided",type:"text",placeholder:"6/6"},{id:"vaOSAided",label:"VA OS Aided",type:"text",placeholder:"6/6"},{id:"nearVision",label:"Near Vision",type:"text",placeholder:"N5"}]},{id:"refraction",title:"Refraction",fields:[{id:"odSphere",label:"OD Sphere",type:"text",placeholder:"-1.25"},{id:"odCylinder",label:"OD Cylinder",type:"text",placeholder:"-0.50"},{id:"odAxis",label:"OD Axis",type:"number",placeholder:"90"},{id:"osSphere",label:"OS Sphere",type:"text",placeholder:"-1.25"},{id:"osCylinder",label:"OS Cylinder",type:"text",placeholder:"-0.50"},{id:"osAxis",label:"OS Axis",type:"number",placeholder:"90"}]},{id:"eye-health",title:"Eye Health Assessment",fields:[{id:"pupilsOD",label:"Pupils OD",type:"text",placeholder:"PERRL"},{id:"pupilsOS",label:"Pupils OS",type:"text",placeholder:"PERRL"},{id:"iopOD",label:"IOP OD (mmHg)",type:"number",placeholder:"15"},{id:"iopOS",label:"IOP OS (mmHg)",type:"number",placeholder:"15"},{id:"anteriorSegmentOD",label:"Anterior Segment OD",type:"textarea",placeholder:"Clear cornea, deep AC, clear lens"},{id:"anteriorSegmentOS",label:"Anterior Segment OS",type:"textarea",placeholder:"Clear cornea, deep AC, clear lens"},{id:"fundusOD",label:"Fundus OD",type:"textarea",placeholder:"Healthy disc, vessels, macula"},{id:"fundusOS",label:"Fundus OS",type:"textarea",placeholder:"Healthy disc, vessels, macula"}]},{id:"assessment",title:"Assessment & Plan",fields:[{id:"diagnosis",label:"Diagnosis",type:"textarea",placeholder:"Primary diagnosis"},{id:"plan",label:"Management Plan",type:"textarea",placeholder:"Treatment plan"},{id:"recall",label:"Recall Period",type:"select",options:["6 months","1 year","2 years","As needed"]}]}]},{id:"contact-lens",name:"Contact Lens Fitting",description:"Contact lens examination and fitting",sections:[{id:"current-wear",title:"Current Contact Lens Wear",fields:[{id:"currentlyWears",label:"Currently Wears CLs",type:"checkbox"},{id:"brandOD",label:"Brand OD",type:"text"},{id:"brandOS",label:"Brand OS",type:"text"},{id:"wearingSchedule",label:"Wearing Schedule",type:"select",options:["Daily","Extended","Occasional"]},{id:"comfort",label:"Comfort Level",type:"select",options:["Excellent","Good","Fair","Poor"]}]},{id:"keratometry",title:"Keratometry",fields:[{id:"kODFlat",label:"K OD Flat",type:"text",placeholder:"42.50"},{id:"kODSteep",label:"K OD Steep",type:"text",placeholder:"43.00"},{id:"kODAxis",label:"K OD Axis",type:"number",placeholder:"180"},{id:"kOSFlat",label:"K OS Flat",type:"text",placeholder:"42.50"},{id:"kOSSteep",label:"K OS Steep",type:"text",placeholder:"43.00"},{id:"kOSAxis",label:"K OS Axis",type:"number",placeholder:"180"}]},{id:"trial-lens",title:"Trial Lens Assessment",fields:[{id:"trialBrandOD",label:"Trial Brand OD",type:"text"},{id:"trialPowerOD",label:"Trial Power OD",type:"text"},{id:"trialBcOD",label:"Trial BC OD",type:"text"},{id:"trialDiameterOD",label:"Trial Diameter OD",type:"text"},{id:"fitOD",label:"Fit Assessment OD",type:"textarea"},{id:"trialBrandOS",label:"Trial Brand OS",type:"text"},{id:"trialPowerOS",label:"Trial Power OS",type:"text"},{id:"trialBcOS",label:"Trial BC OS",type:"text"},{id:"trialDiameterOS",label:"Trial Diameter OS",type:"text"},{id:"fitOS",label:"Fit Assessment OS",type:"textarea"}]}]},{id:"pediatric",name:"Pediatric Eye Examination",description:"Eye examination for children",sections:[{id:"development",title:"Developmental History",fields:[{id:"age",label:"Age",type:"text"},{id:"birthHistory",label:"Birth History",type:"textarea"},{id:"developmental",label:"Developmental Milestones",type:"textarea"},{id:"schoolPerformance",label:"School Performance",type:"textarea"}]},{id:"visual-function",title:"Visual Function",fields:[{id:"fixation",label:"Fixation",type:"text",placeholder:"Central, steady, maintained"},{id:"tracking",label:"Tracking",type:"text",placeholder:"Smooth pursuits"},{id:"stereopsis",label:"Stereopsis",type:"text",placeholder:"40 seconds of arc"},{id:"colorVision",label:"Color Vision",type:"text",placeholder:"Normal"}]},{id:"binocular-vision",title:"Binocular Vision",fields:[{id:"coverTest",label:"Cover Test",type:"textarea"},{id:"nearPoint",label:"Near Point of Convergence",type:"text"},{id:"accommodation",label:"Accommodation",type:"textarea"}]}]},{id:"glaucoma-screening",name:"Glaucoma Screening",description:"Focused glaucoma assessment",sections:[{id:"risk-factors",title:"Risk Factors",fields:[{id:"familyHistory",label:"Family History",type:"checkbox"},{id:"age",label:"Age",type:"number"},{id:"ethnicity",label:"Ethnicity",type:"text"},{id:"myopia",label:"High Myopia",type:"checkbox"}]},{id:"measurements",title:"Clinical Measurements",fields:[{id:"iopOD",label:"IOP OD (mmHg)",type:"number"},{id:"iopOS",label:"IOP OS (mmHg)",type:"number"},{id:"cctOD",label:"CCT OD (μm)",type:"number"},{id:"cctOS",label:"CCT OS (μm)",type:"number"},{id:"cdRatioOD",label:"C/D Ratio OD",type:"text",placeholder:"0.3"},{id:"cdRatioOS",label:"C/D Ratio OS",type:"text",placeholder:"0.3"}]},{id:"assessment",title:"Assessment",fields:[{id:"visualField",label:"Visual Field Status",type:"textarea"},{id:"risk",label:"Risk Level",type:"select",options:["Low","Moderate","High","Glaucoma Suspect"]},{id:"recommendations",label:"Recommendations",type:"textarea"}]}]}];function Be(){const[,S]=ee("/ecp/patient/:id/test"),m=S?.id,[E,p]=f.useState("template"),[r,y]=f.useState(null),[i,C]=f.useState({}),[x,V]=f.useState({OD:"",OS:""}),[T,P]=f.useState(null),[v,u]=f.useState({OD:null,OS:null}),[a,b]=f.useState(""),{toast:d}=se(),{data:s,isLoading:l}=K({queryKey:["/api/patients",m],enabled:!!m}),{data:h}=K({queryKey:["/api/ecp/test-rooms"]}),c=h?.filter(t=>t.isActive&&t.currentStatus==="available"),k=$({mutationFn:async t=>await(await _("POST","/api/examinations",t)).json(),onSuccess:()=>{W.invalidateQueries({queryKey:["/api/examinations"]}),d({title:"Examination Saved",description:"Eye examination has been saved successfully."}),p("prescription")},onError:()=>{d({title:"Error",description:"Failed to save examination. Please try again.",variant:"destructive"})}}),O=$({mutationFn:async t=>await(await _("POST","/api/prescriptions",t)).json(),onSuccess:()=>{W.invalidateQueries({queryKey:["/api/prescriptions"]}),d({title:"Prescription Created",description:"Prescription has been created successfully."})},onError:()=>{d({title:"Error",description:"Failed to create prescription. Please try again.",variant:"destructive"})}}),R=t=>{t.preventDefault();const n=new FormData(t.currentTarget);if(!a){d({title:"Test Room Required",description:"Please select a test room before saving the examination.",variant:"destructive"});return}const M={patientId:m,testRoomId:a,visualAcuityOD:n.get("visualAcuityOD")||null,visualAcuityOS:n.get("visualAcuityOS")||null,autoRefractionODSphere:n.get("autoRefractionODSphere")||null,autoRefractionODCylinder:n.get("autoRefractionODCylinder")||null,autoRefractionODAxis:n.get("autoRefractionODAxis")||null,autoRefractionOSSphere:n.get("autoRefractionOSSphere")||null,autoRefractionOSCylinder:n.get("autoRefractionOSCylinder")||null,autoRefractionOSAxis:n.get("autoRefractionOSAxis")||null,notes:n.get("notes")||null};k.mutate(M)},B=t=>{t.preventDefault();const n=new FormData(t.currentTarget),M=n.get("expiryDate"),Z={patientId:m,issueDate:new Date().toISOString(),expiryDate:M?new Date(M).toISOString():null,odSphere:n.get("odSphere")||null,odCylinder:n.get("odCylinder")||null,odAxis:n.get("odAxis")||null,odAdd:n.get("odAdd")||null,osSphere:n.get("osSphere")||null,osCylinder:n.get("osCylinder")||null,osAxis:n.get("osAxis")||null,osAdd:n.get("osAdd")||null,pd:n.get("pd")||null};O.mutate(Z)};return l?e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"h-10 w-48 bg-muted animate-pulse rounded"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:177,columnNumber:9},this),e.jsxDEV("div",{className:"h-96 bg-muted animate-pulse rounded"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:178,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:176,columnNumber:7},this):s?e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxDEV(te,{href:"/ecp/patients",children:e.jsxDEV(g,{variant:"outline",size:"sm","data-testid":"button-back",children:[e.jsxDEV(Ne,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:197,columnNumber:13},this),"Back to Patients"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:196,columnNumber:11},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:195,columnNumber:9},this),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("h1",{className:"text-3xl font-bold tracking-tight",children:"Eye Examination"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:202,columnNumber:11},this),e.jsxDEV("p",{className:"text-muted-foreground mt-1",children:["Patient: ",s.name,s.dateOfBirth&&` • DOB: ${s.dateOfBirth}`,s.nhsNumber&&e.jsxDEV(z,{variant:"outline",className:"ml-2 font-mono",children:["NHS: ",s.nhsNumber]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:207,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:203,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:201,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:194,columnNumber:7},this),e.jsxDEV(ie,{value:E,onValueChange:p,children:[e.jsxDEV(ae,{className:"grid w-full grid-cols-6",children:[e.jsxDEV(A,{value:"template","data-testid":"tab-template",children:[e.jsxDEV(xe,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:218,columnNumber:13},this),"Template"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:217,columnNumber:11},this),e.jsxDEV(A,{value:"visual-acuity","data-testid":"tab-visual-acuity",children:[e.jsxDEV(le,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:222,columnNumber:13},this),"Visual Acuity"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:221,columnNumber:11},this),e.jsxDEV(A,{value:"color-vision","data-testid":"tab-color-vision",children:[e.jsxDEV(H,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:226,columnNumber:13},this),"Color Vision"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:225,columnNumber:11},this),e.jsxDEV(A,{value:"visual-field","data-testid":"tab-visual-field",children:[e.jsxDEV(q,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:230,columnNumber:13},this),"Visual Field"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:229,columnNumber:11},this),e.jsxDEV(A,{value:"examination","data-testid":"tab-examination",children:[e.jsxDEV(G,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:234,columnNumber:13},this),"Examination"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:233,columnNumber:11},this),e.jsxDEV(A,{value:"prescription","data-testid":"tab-prescription",children:[e.jsxDEV(ne,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:238,columnNumber:13},this),"Prescription"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:237,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:216,columnNumber:9},this),e.jsxDEV(F,{value:"template",children:e.jsxDEV(L,{children:[e.jsxDEV(I,{children:[e.jsxDEV(j,{children:"Select Examination Template"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:246,columnNumber:15},this),e.jsxDEV(w,{children:"Choose a template to guide your examination workflow"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:247,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:245,columnNumber:13},this),e.jsxDEV(U,{className:"space-y-4",children:e.jsxDEV("div",{className:"grid gap-4",children:Ee.map(t=>e.jsxDEV("button",{onClick:()=>{y(t),p("examination")},className:"text-left p-4 border rounded-lg hover:bg-accent transition-colors",children:[e.jsxDEV("h3",{className:"font-semibold",children:t.name},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:262,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground mt-1",children:t.description},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:263,columnNumber:21},this),e.jsxDEV("div",{className:"flex gap-2 mt-2",children:t.sections.map(n=>e.jsxDEV(z,{variant:"outline",className:"text-xs",children:n.title},n.id,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:268,columnNumber:25},this))},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:266,columnNumber:21},this)]},t.id,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:254,columnNumber:19},this))},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:252,columnNumber:15},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:251,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:244,columnNumber:11},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:243,columnNumber:9},this),e.jsxDEV(F,{value:"visual-acuity",children:[e.jsxDEV("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxDEV(Y,{eye:"OD",initialValue:x.OD,onResult:t=>V({...x,OD:t})},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:282,columnNumber:13},this),e.jsxDEV(Y,{eye:"OS",initialValue:x.OS,onResult:t=>V({...x,OS:t})},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:287,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:281,columnNumber:11},this),e.jsxDEV("div",{className:"mt-4 flex justify-end",children:e.jsxDEV(g,{onClick:()=>p("color-vision"),children:"Next: Color Vision Test"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:294,columnNumber:13},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:293,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:280,columnNumber:9},this),e.jsxDEV(F,{value:"color-vision",children:[e.jsxDEV(ge,{onComplete:t=>{P(t),d({title:"Color Vision Test Complete",description:`Score: ${t.correctAnswers}/${t.totalPlates} - ${t.interpretation}`})}},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:301,columnNumber:11},this),e.jsxDEV("div",{className:"mt-4 flex justify-end",children:e.jsxDEV(g,{onClick:()=>p("visual-field"),children:"Next: Visual Field Test"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:311,columnNumber:13},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:310,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:300,columnNumber:9},this),e.jsxDEV(F,{value:"visual-field",children:[e.jsxDEV("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxDEV(Q,{eye:"OD",onComplete:t=>{u({...v,OD:t}),d({title:"Visual Field Test Complete - OD",description:"Results saved for right eye"})}},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:319,columnNumber:13},this),e.jsxDEV(Q,{eye:"OS",onComplete:t=>{u({...v,OS:t}),d({title:"Visual Field Test Complete - OS",description:"Results saved for left eye"})}},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:329,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:318,columnNumber:11},this),e.jsxDEV("div",{className:"mt-4 flex justify-end",children:e.jsxDEV(g,{onClick:()=>p("examination"),children:"Continue to Full Examination"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:341,columnNumber:13},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:340,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:317,columnNumber:9},this),e.jsxDEV(F,{value:"examination",children:e.jsxDEV("form",{onSubmit:R,children:e.jsxDEV(L,{children:[e.jsxDEV(I,{children:[e.jsxDEV(j,{children:"Clinical Eye Examination"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:351,columnNumber:17},this),e.jsxDEV(w,{children:[r?`${r.name} - `:"","Record visual acuity and refraction measurements"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:352,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:350,columnNumber:15},this),e.jsxDEV(U,{className:"space-y-6",children:[e.jsxDEV("div",{className:"p-4 border-2 border-primary/20 rounded-lg bg-primary/5 space-y-3",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(he,{className:"h-5 w-5 text-primary"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:360,columnNumber:21},this),e.jsxDEV("h3",{className:"font-semibold",children:"Test Room Selection"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:361,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:359,columnNumber:19},this),e.jsxDEV("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"testRoom",children:"Select Test Room *"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:365,columnNumber:23},this),e.jsxDEV(oe,{value:a,onValueChange:b,required:!0,children:[e.jsxDEV(ce,{id:"testRoom",className:"bg-background",children:e.jsxDEV(me,{placeholder:"Choose test room..."},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:372,columnNumber:27},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:371,columnNumber:25},this),e.jsxDEV(ue,{children:c?.map(t=>e.jsxDEV(de,{value:t.id,children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:"font-medium",children:t.roomName},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:378,columnNumber:33},this),t.roomCode&&e.jsxDEV(z,{variant:"outline",className:"text-xs",children:t.roomCode},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:380,columnNumber:35},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:377,columnNumber:31},this)},t.id,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:376,columnNumber:29},this))},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:374,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:366,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:364,columnNumber:21},this),a&&c?.find(t=>t.id===a)&&e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{children:"Room Details"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:392,columnNumber:25},this),e.jsxDEV("div",{className:"p-3 bg-background rounded-md border text-sm space-y-1",children:[c.find(t=>t.id===a)?.equipmentList&&e.jsxDEV("p",{className:"text-muted-foreground",children:["Equipment: ",c.find(t=>t.id===a)?.equipmentList]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:395,columnNumber:29},this),c.find(t=>t.id===a)?.allowRemoteAccess&&e.jsxDEV(z,{variant:"outline",className:"gap-1",children:[e.jsxDEV(fe,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:401,columnNumber:31},this),"Remote Access"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:400,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:393,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:391,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:363,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:358,columnNumber:17},this),(x.OD||x.OS||T||v.OD||v.OS)&&e.jsxDEV("div",{className:"p-4 bg-muted rounded-lg space-y-2",children:[e.jsxDEV("h3",{className:"font-semibold text-sm",children:"Test Results Summary"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:414,columnNumber:21},this),x.OD&&e.jsxDEV("p",{className:"text-sm",children:["Visual Acuity OD: ",x.OD]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:416,columnNumber:23},this),x.OS&&e.jsxDEV("p",{className:"text-sm",children:["Visual Acuity OS: ",x.OS]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:419,columnNumber:23},this),T&&e.jsxDEV("p",{className:"text-sm",children:["Color Vision: ",T.correctAnswers,"/",T.totalPlates," - ",T.interpretation]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:422,columnNumber:23},this),v.OD&&e.jsxDEV("p",{className:"text-sm",children:"Visual Field OD: Complete"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:427,columnNumber:23},this),v.OS&&e.jsxDEV("p",{className:"text-sm",children:"Visual Field OS: Complete"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:430,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:413,columnNumber:19},this),e.jsxDEV("div",{className:"grid gap-6",children:[e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("h3",{className:"font-semibold flex items-center gap-2",children:"Visual Acuity"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:437,columnNumber:21},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"visualAcuityOD",children:"OD (Right Eye)"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:442,columnNumber:25},this),e.jsxDEV(N,{id:"visualAcuityOD",name:"visualAcuityOD",placeholder:"e.g., 6/6",defaultValue:x.OD,"data-testid":"input-va-od"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:443,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:441,columnNumber:23},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"visualAcuityOS",children:"OS (Left Eye)"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:452,columnNumber:25},this),e.jsxDEV(N,{id:"visualAcuityOS",name:"visualAcuityOS",placeholder:"e.g., 6/6","data-testid":"input-va-os"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:453,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:451,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:440,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:436,columnNumber:19},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("h3",{className:"font-semibold flex items-center gap-2",children:"Auto-Refraction - OD (Right Eye)"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:464,columnNumber:21},this),e.jsxDEV("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"autoRefractionODSphere",children:"Sphere"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:469,columnNumber:25},this),e.jsxDEV(N,{id:"autoRefractionODSphere",name:"autoRefractionODSphere",placeholder:"e.g., -1.25","data-testid":"input-ar-od-sphere"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:470,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:468,columnNumber:23},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"autoRefractionODCylinder",children:"Cylinder"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:478,columnNumber:25},this),e.jsxDEV(N,{id:"autoRefractionODCylinder",name:"autoRefractionODCylinder",placeholder:"e.g., -0.50","data-testid":"input-ar-od-cylinder"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:479,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:477,columnNumber:23},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"autoRefractionODAxis",children:"Axis"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:487,columnNumber:25},this),e.jsxDEV(N,{id:"autoRefractionODAxis",name:"autoRefractionODAxis",placeholder:"e.g., 90","data-testid":"input-ar-od-axis"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:488,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:486,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:467,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:463,columnNumber:19},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("h3",{className:"font-semibold flex items-center gap-2",children:"Auto-Refraction - OS (Left Eye)"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:499,columnNumber:21},this),e.jsxDEV("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"autoRefractionOSSphere",children:"Sphere"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:504,columnNumber:25},this),e.jsxDEV(N,{id:"autoRefractionOSSphere",name:"autoRefractionOSSphere",placeholder:"e.g., -1.25","data-testid":"input-ar-os-sphere"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:505,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:503,columnNumber:23},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"autoRefractionOSCylinder",children:"Cylinder"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:513,columnNumber:25},this),e.jsxDEV(N,{id:"autoRefractionOSCylinder",name:"autoRefractionOSCylinder",placeholder:"e.g., -0.50","data-testid":"input-ar-os-cylinder"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:514,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:512,columnNumber:23},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"autoRefractionOSAxis",children:"Axis"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:522,columnNumber:25},this),e.jsxDEV(N,{id:"autoRefractionOSAxis",name:"autoRefractionOSAxis",placeholder:"e.g., 90","data-testid":"input-ar-os-axis"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:523,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:521,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:502,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:498,columnNumber:19},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"notes",children:"Clinical Notes"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:534,columnNumber:21},this),e.jsxDEV(re,{id:"notes",name:"notes",placeholder:"Enter any additional observations or notes...",rows:4,"data-testid":"textarea-notes"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:535,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:533,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:435,columnNumber:17},this),e.jsxDEV("div",{className:"flex justify-end gap-2",children:e.jsxDEV(g,{type:"submit",disabled:k.isPending,"data-testid":"button-save-examination",children:[e.jsxDEV(De,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:551,columnNumber:21},this),k.isPending?"Saving...":"Save Examination"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:546,columnNumber:19},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:545,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:356,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:349,columnNumber:13},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:348,columnNumber:11},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:347,columnNumber:9},this),e.jsxDEV(F,{value:"prescription",children:e.jsxDEV("form",{onSubmit:B,children:e.jsxDEV(L,{children:[e.jsxDEV(I,{children:[e.jsxDEV(j,{children:"Optical Prescription"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:564,columnNumber:17},this),e.jsxDEV(w,{children:"Create prescription based on examination results"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:565,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:563,columnNumber:15},this),e.jsxDEV(U,{className:"space-y-6",children:[e.jsxDEV("div",{className:"grid gap-6",children:[e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"issueDate",children:"Issue Date"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:573,columnNumber:23},this),e.jsxDEV(N,{id:"issueDate",name:"issueDate",type:"date",defaultValue:new Date().toISOString().split("T")[0],disabled:!0,"data-testid":"input-issue-date"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:574,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:572,columnNumber:21},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"expiryDate",children:"Expiry Date"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:584,columnNumber:23},this),e.jsxDEV(N,{id:"expiryDate",name:"expiryDate",type:"date","data-testid":"input-expiry-date"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:585,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:583,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:571,columnNumber:19},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("h3",{className:"font-semibold flex items-center gap-2",children:"OD (Right Eye)"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:595,columnNumber:21},this),e.jsxDEV("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"odSphere",children:"Sphere"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:600,columnNumber:25},this),e.jsxDEV(N,{id:"odSphere",name:"odSphere",placeholder:"-1.25","data-testid":"input-rx-od-sphere"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:601,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:599,columnNumber:23},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"odCylinder",children:"Cylinder"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:609,columnNumber:25},this),e.jsxDEV(N,{id:"odCylinder",name:"odCylinder",placeholder:"-0.50","data-testid":"input-rx-od-cylinder"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:610,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:608,columnNumber:23},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"odAxis",children:"Axis"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:618,columnNumber:25},this),e.jsxDEV(N,{id:"odAxis",name:"odAxis",placeholder:"90","data-testid":"input-rx-od-axis"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:619,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:617,columnNumber:23},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"odAdd",children:"Add"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:627,columnNumber:25},this),e.jsxDEV(N,{id:"odAdd",name:"odAdd",placeholder:"+1.50","data-testid":"input-rx-od-add"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:628,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:626,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:598,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:594,columnNumber:19},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("h3",{className:"font-semibold flex items-center gap-2",children:"OS (Left Eye)"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:639,columnNumber:21},this),e.jsxDEV("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"osSphere",children:"Sphere"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:644,columnNumber:25},this),e.jsxDEV(N,{id:"osSphere",name:"osSphere",placeholder:"-1.25","data-testid":"input-rx-os-sphere"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:645,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:643,columnNumber:23},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"osCylinder",children:"Cylinder"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:653,columnNumber:25},this),e.jsxDEV(N,{id:"osCylinder",name:"osCylinder",placeholder:"-0.50","data-testid":"input-rx-os-cylinder"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:654,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:652,columnNumber:23},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"osAxis",children:"Axis"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:662,columnNumber:25},this),e.jsxDEV(N,{id:"osAxis",name:"osAxis",placeholder:"90","data-testid":"input-rx-os-axis"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:663,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:661,columnNumber:23},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"osAdd",children:"Add"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:671,columnNumber:25},this),e.jsxDEV(N,{id:"osAdd",name:"osAdd",placeholder:"+1.50","data-testid":"input-rx-os-add"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:672,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:670,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:642,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:638,columnNumber:19},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(o,{htmlFor:"pd",children:"Pupillary Distance (PD)"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:684,columnNumber:23},this),e.jsxDEV(N,{id:"pd",name:"pd",placeholder:"63","data-testid":"input-rx-pd"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:685,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:683,columnNumber:21},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:682,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:570,columnNumber:17},this),e.jsxDEV("div",{className:"flex justify-end gap-2",children:e.jsxDEV(g,{type:"submit",disabled:O.isPending,"data-testid":"button-create-prescription",children:[e.jsxDEV(ye,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:701,columnNumber:21},this),O.isPending?"Creating...":"Create Prescription"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:696,columnNumber:19},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:695,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:569,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:562,columnNumber:13},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:561,columnNumber:11},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:560,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:215,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:193,columnNumber:5},this):e.jsxDEV("div",{className:"text-center py-12",children:[e.jsxDEV("h2",{className:"text-2xl font-semibold",children:"Patient not found"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:186,columnNumber:9},this),e.jsxDEV("p",{className:"text-muted-foreground mt-2",children:"The patient could not be loaded"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:187,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EyeTestPage.tsx",lineNumber:185,columnNumber:7},this)}export{Be as default};
