import{r as l,e}from"./vendor-react-yzYIzJFU.js";import{u as x,e as L,C as E,h as D,f as n,i as v,j as k,a as S,M as I,I as d,w as j,Y as P}from"./index-BiBisH8X.js";import{c as U}from"./vendor-react-query-Dxpktacb.js";import{L as p}from"./label-DDyL8AZL.js";import{A as V}from"./arrow-left-vOI8T5Pv.js";import{L as w}from"./lock-ykft9mcf.js";import"./vendor-mui-DFe-F-Gn.js";import"./vendor-radix-B6etWzp2.js";function M(){const[,s]=x(),{toast:r}=L(),g=U(),[o,b]=l.useState(""),[m,N]=l.useState(""),[i,c]=l.useState(!1),f=async a=>{a.preventDefault(),c(!0);try{const h=await(await P("POST","/api/auth/login-email",{email:o,password:m})).json();await g.invalidateQueries({queryKey:["/api/auth/user"]}),r({title:"Login successful",description:"Welcome back to ILS"});const t=h.user;if(t.accountStatus==="pending")s("/pending-approval");else if(t.accountStatus==="suspended")s("/account-suspended");else switch(t.role){case"ecp":s("/ecp/dashboard");break;case"lab_tech":case"engineer":s("/lab/dashboard");break;case"supplier":s("/supplier/dashboard");break;case"admin":s("/admin/dashboard");break;default:s("/")}}catch(u){r({title:"Login failed",description:u.message||"Invalid email or password",variant:"destructive"})}finally{c(!1)}};return e.jsxDEV("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-muted/20 p-4",children:e.jsxDEV(E,{className:"w-full max-w-md",children:[e.jsxDEV(D,{className:"space-y-1",children:[e.jsxDEV("div",{className:"flex items-center gap-2 mb-2",children:e.jsxDEV(n,{variant:"ghost",size:"sm",onClick:()=>s("/"),"data-testid":"button-back-to-home",className:"h-8",children:[e.jsxDEV(V,{className:"h-4 w-4 mr-1"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:86,columnNumber:15},this),"Back"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:79,columnNumber:13},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:78,columnNumber:11},this),e.jsxDEV(v,{className:"text-2xl font-bold",children:"Sign in to ILS"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:90,columnNumber:11},this),e.jsxDEV(k,{children:"Enter your email and password to access your account"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:91,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:77,columnNumber:9},this),e.jsxDEV(S,{children:[e.jsxDEV("form",{onSubmit:f,className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(p,{htmlFor:"email",children:"Email"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:98,columnNumber:15},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(I,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:100,columnNumber:17},this),e.jsxDEV(d,{id:"email",type:"email",placeholder:"your.email@example.com",value:o,onChange:a=>b(a.target.value),required:!0,className:"pl-9","data-testid":"input-email",disabled:i},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:101,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:99,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:97,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(p,{htmlFor:"password",children:"Password"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:116,columnNumber:15},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(w,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:118,columnNumber:17},this),e.jsxDEV(d,{id:"password",type:"password",placeholder:"Enter your password",value:m,onChange:a=>N(a.target.value),required:!0,className:"pl-9","data-testid":"input-password",disabled:i},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:119,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:117,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:115,columnNumber:13},this),e.jsxDEV(n,{type:"submit",className:"w-full",disabled:i,"data-testid":"button-login",children:i?"Signing in...":"Sign in"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:133,columnNumber:13},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("div",{className:"absolute inset-0 flex items-center",children:e.jsxDEV("span",{className:"w-full border-t"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:144,columnNumber:17},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:143,columnNumber:15},this),e.jsxDEV("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsxDEV("span",{className:"bg-card px-2 text-muted-foreground",children:"Don't have an account?"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:147,columnNumber:17},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:146,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:142,columnNumber:13},this),e.jsxDEV(n,{type:"button",variant:"outline",className:"w-full",onClick:()=>s("/email-signup"),"data-testid":"button-create-account",children:"Create an account"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:153,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:96,columnNumber:11},this),e.jsxDEV("div",{className:"mt-6 p-3 bg-muted/50 rounded-md",children:e.jsxDEV("div",{className:"flex gap-2 text-sm text-muted-foreground",children:[e.jsxDEV(j,{className:"h-4 w-4 flex-shrink-0 mt-0.5"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:166,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-medium text-foreground mb-1",children:"Alternative login options:"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:168,columnNumber:17},this),e.jsxDEV("p",{children:"You can also sign in using Replit authentication from the home page."},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:169,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:167,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:165,columnNumber:13},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:164,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:95,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:76,columnNumber:7},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/EmailLoginPage.tsx",lineNumber:75,columnNumber:5},this)}export{M as default};
