import{r as o,e}from"./vendor-react-yzYIzJFU.js";import{c as z,u as X,a as D}from"./vendor-react-query-Dxpktacb.js";import{c as ee,e as se,a0 as T,d as c,p as ae,ab as A,v as k,M as g,q as ne,r as te,t as ie,C as V,h as K,i as M,B as L,n as j,j as re,a as U,I as me,f as r,E as le,al as oe,_ as ce}from"./index-BiBisH8X.js";import{L as ue}from"./label-DDyL8AZL.js";import{A as N,b}from"./alert-DQClezAk.js";import{R as h}from"./refresh-cw-C3bXnO94.js";import{C as _}from"./credit-card-DZhMFmUO.js";import{L as f}from"./lock-ykft9mcf.js";import{D as I}from"./database-CXt6lsO4.js";import{E as de}from"./eye-off-clS8ZdCy.js";import{S as pe}from"./save-IQad8R1X.js";import{C as ge}from"./circle-x-CIGbUkxi.js";import{Z as Ne}from"./zap-jN_IYbL_.js";import"./vendor-mui-DFe-F-Gn.js";import"./vendor-radix-B6etWzp2.js";const w=ee("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]),y=[{category:"AI Services",keys:[{name:"OpenAI API Key",key:"openai",envVar:"OPENAI_API_KEY",description:"GPT-4, GPT-3.5 for AI assistant and clinical decision support",icon:A,required:!1,sensitive:!0,testEndpoint:"/api/system-admin/test-connection/openai"},{name:"Anthropic API Key",key:"anthropic",envVar:"ANTHROPIC_API_KEY",description:"Claude models for advanced AI analysis",icon:A,required:!1,sensitive:!0,testEndpoint:"/api/system-admin/test-connection/anthropic"}]},{category:"Payment Processing",keys:[{name:"Stripe Secret Key",key:"stripe_secret",envVar:"STRIPE_SECRET_KEY",description:"Process payments and manage subscriptions",icon:_,required:!0,sensitive:!0,testEndpoint:"/api/system-admin/test-connection/stripe"},{name:"Stripe Publishable Key",key:"stripe_publishable",envVar:"STRIPE_PUBLISHABLE_KEY",description:"Client-side Stripe integration",icon:_,required:!0,sensitive:!1},{name:"Stripe Webhook Secret",key:"stripe_webhook",envVar:"STRIPE_WEBHOOK_SECRET",description:"Verify Stripe webhook signatures",icon:c,required:!0,sensitive:!0}]},{category:"E-commerce Integration",keys:[{name:"Shopify API Key",key:"shopify_api",envVar:"SHOPIFY_API_KEY",description:"Shopify store integration for e-commerce",icon:k,required:!1,sensitive:!0,testEndpoint:"/api/system-admin/test-connection/shopify"},{name:"Shopify Secret Key",key:"shopify_secret",envVar:"SHOPIFY_SECRET_KEY",description:"Shopify webhook verification",icon:c,required:!1,sensitive:!0},{name:"Shopify Store Domain",key:"shopify_domain",envVar:"SHOPIFY_STORE_DOMAIN",description:"Your Shopify store URL (e.g., mystore.myshopify.com)",icon:k,required:!1,sensitive:!1}]},{category:"Email & Communications",keys:[{name:"SMTP Host",key:"smtp_host",envVar:"SMTP_HOST",description:"Email server hostname",icon:g,required:!0,sensitive:!1},{name:"SMTP Port",key:"smtp_port",envVar:"SMTP_PORT",description:"Email server port (usually 587 or 465)",icon:g,required:!0,sensitive:!1},{name:"SMTP User",key:"smtp_user",envVar:"SMTP_USER",description:"Email authentication username",icon:g,required:!0,sensitive:!1},{name:"SMTP Password",key:"smtp_password",envVar:"SMTP_PASSWORD",description:"Email authentication password",icon:f,required:!0,sensitive:!0,testEndpoint:"/api/system-admin/test-connection/smtp"}]},{category:"Cloud Storage",keys:[{name:"AWS Access Key ID",key:"aws_access_key",envVar:"AWS_ACCESS_KEY_ID",description:"S3 file storage access key",icon:w,required:!1,sensitive:!0},{name:"AWS Secret Access Key",key:"aws_secret_key",envVar:"AWS_SECRET_ACCESS_KEY",description:"S3 file storage secret key",icon:f,required:!1,sensitive:!0,testEndpoint:"/api/system-admin/test-connection/aws-s3"},{name:"AWS Region",key:"aws_region",envVar:"AWS_REGION",description:"S3 bucket region (e.g., us-east-1)",icon:w,required:!1,sensitive:!1},{name:"S3 Bucket Name",key:"aws_s3_bucket",envVar:"AWS_S3_BUCKET",description:"S3 bucket for file storage",icon:I,required:!1,sensitive:!1}]},{category:"External Integrations",keys:[{name:"LIMS API Base URL",key:"lims_api_url",envVar:"LIMS_API_BASE_URL",description:"Lab Information Management System API endpoint",icon:I,required:!1,sensitive:!1},{name:"LIMS API Key",key:"lims_api_key",envVar:"LIMS_API_KEY",description:"LIMS authentication key",icon:T,required:!1,sensitive:!0,testEndpoint:"/api/system-admin/test-connection/lims"},{name:"LIMS Webhook Secret",key:"lims_webhook_secret",envVar:"LIMS_WEBHOOK_SECRET",description:"LIMS webhook signature verification",icon:c,required:!1,sensitive:!0}]}];function Me(){const{toast:m}=se(),C=z(),[R,q]=o.useState(new Set),[i,P]=o.useState({}),[O,u]=o.useState(null),[Y,v]=o.useState({}),{data:d,isLoading:B}=X({queryKey:["/api/system-admin/config/api-keys"]}),S=D({mutationFn:async({envVar:a,value:s})=>{const n=await fetch("/api/system-admin/config/settings",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({key:a,value:s,category:"integration"})});if(!n.ok)throw new Error("Failed to save API key");return n.json()},onSuccess:(a,s)=>{m({title:"API Key Saved",description:`${s.envVar} has been updated successfully.`}),C.invalidateQueries({queryKey:["/api/system-admin/config/api-keys"]}),P(n=>{const t={...n};return delete t[s.envVar],t})},onError:a=>{m({title:"Error",description:a.message,variant:"destructive"})}}),W=D({mutationFn:async({endpoint:a,keyValue:s})=>{const n=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({testValue:s})});if(!n.ok){const t=await n.json();throw new Error(t.message||"Connection test failed")}return n.json()},onSuccess:(a,s)=>{const n=s.endpoint.split("/").pop()||"unknown";v(t=>({...t,[n]:{success:!0,message:a.message||"Connection successful!"}})),m({title:"Connection Successful",description:a.message||"API key is valid and working."}),u(null)},onError:(a,s)=>{const n=s.endpoint.split("/").pop()||"unknown";v(t=>({...t,[n]:{success:!1,message:a.message}})),m({title:"Connection Failed",description:a.message,variant:"destructive"}),u(null)}}),H=a=>{q(s=>{const n=new Set(s);return n.has(a)?n.delete(a):n.add(a),n})},F=(a,s)=>{P(n=>({...n,[a]:s}))},G=a=>{const s=i[a];s!==void 0&&S.mutate({envVar:a,value:s})},Q=(a,s)=>{const n=i[s]||d?.[s];u(s),W.mutate({endpoint:a,keyValue:n})},Z=a=>i[a]!==void 0?i[a]:d?.[a]||"",J=a=>i[a]!==void 0&&i[a]!==(d?.[a]||"");return B?e.jsxDEV("div",{className:"flex items-center justify-center h-96",children:e.jsxDEV(h,{className:"h-8 w-8 animate-spin text-primary"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:394,columnNumber:9},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:393,columnNumber:7},this):e.jsxDEV("div",{className:"p-6 space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-3",children:[e.jsxDEV(T,{className:"h-8 w-8"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:404,columnNumber:11},this),"API Keys Management"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:403,columnNumber:9},this),e.jsxDEV("p",{className:"text-muted-foreground mt-2",children:"Manage third-party service credentials and integration keys. All sensitive keys are encrypted at rest."},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:407,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:402,columnNumber:7},this),e.jsxDEV(N,{children:[e.jsxDEV(c,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:414,columnNumber:9},this),e.jsxDEV(b,{children:[e.jsxDEV("strong",{children:"Security Notice:"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:416,columnNumber:11},this)," API keys are encrypted and stored securely. Never share these keys or commit them to version control. Use environment variables in production."]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:415,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:413,columnNumber:7},this),e.jsxDEV(ae,{defaultValue:y[0]?.category,className:"space-y-4",children:[e.jsxDEV(ne,{className:"grid w-full grid-cols-6",children:y.map(a=>e.jsxDEV(te,{value:a.category,children:a.category},a.category,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:425,columnNumber:13},this))},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:423,columnNumber:9},this),y.map(a=>e.jsxDEV(ie,{value:a.category,className:"space-y-4",children:a.keys.map(s=>{const n=s.icon,t=Z(s.envVar),x=R.has(s.envVar),p=J(s.envVar),l=Y[s.key],E=O===s.envVar;return e.jsxDEV(V,{children:[e.jsxDEV(K,{children:[e.jsxDEV(M,{className:"flex items-center gap-2 text-lg",children:[e.jsxDEV(n,{className:"h-5 w-5 text-primary"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:445,columnNumber:23},this),s.name,s.required&&e.jsxDEV(L,{variant:"destructive",className:"ml-2",children:"Required"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:448,columnNumber:25},this),t&&!s.testEndpoint&&e.jsxDEV(L,{variant:"outline",className:"ml-auto",children:[e.jsxDEV(j,{className:"h-3 w-3 mr-1"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:452,columnNumber:27},this),"Configured"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:451,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:444,columnNumber:21},this),e.jsxDEV(re,{children:s.description},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:457,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:443,columnNumber:19},this),e.jsxDEV(U,{className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV(ue,{htmlFor:s.envVar,className:"text-sm font-medium",children:s.envVar},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:461,columnNumber:23},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("div",{className:"relative flex-1",children:[e.jsxDEV(me,{id:s.envVar,type:x?"text":"password",value:t,onChange:$=>F(s.envVar,$.target.value),placeholder:`Enter ${s.name.toLowerCase()}...`,className:"pr-10"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:466,columnNumber:27},this),e.jsxDEV(r,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>H(s.envVar),children:x?e.jsxDEV(de,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:482,columnNumber:31},this):e.jsxDEV(le,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:484,columnNumber:31},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:474,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:465,columnNumber:25},this),e.jsxDEV(r,{onClick:()=>G(s.envVar),disabled:!p||S.isPending,className:"gap-2",children:[e.jsxDEV(pe,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:493,columnNumber:27},this),p?"Save":"Saved"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:488,columnNumber:25},this),s.testEndpoint&&e.jsxDEV(r,{onClick:()=>Q(s.testEndpoint,s.envVar),disabled:!t||E,variant:"outline",className:"gap-2",children:[E?e.jsxDEV(h,{className:"h-4 w-4 animate-spin"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:504,columnNumber:31},this):e.jsxDEV(oe,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:506,columnNumber:31},this),"Test"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:497,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:464,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:460,columnNumber:21},this),l&&e.jsxDEV(N,{variant:l.success?"default":"destructive",children:[l.success?e.jsxDEV(j,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:518,columnNumber:27},this):e.jsxDEV(ge,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:520,columnNumber:27},this),e.jsxDEV(b,{children:l.message},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:522,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:516,columnNumber:23},this),p&&e.jsxDEV(N,{children:[e.jsxDEV(ce,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:529,columnNumber:25},this),e.jsxDEV(b,{className:"text-sm",children:'You have unsaved changes. Click "Save" to apply them.'},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:530,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:528,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:459,columnNumber:19},this)]},s.envVar,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:442,columnNumber:17},this)})},a.category,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:432,columnNumber:11},this))]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:422,columnNumber:7},this),e.jsxDEV(V,{children:[e.jsxDEV(K,{children:e.jsxDEV(M,{className:"flex items-center gap-2",children:[e.jsxDEV(Ne,{className:"h-5 w-5"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:547,columnNumber:13},this),"Quick Actions"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:546,columnNumber:11},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:545,columnNumber:9},this),e.jsxDEV(U,{className:"space-y-2",children:[e.jsxDEV(r,{variant:"outline",className:"w-full justify-start gap-2",children:[e.jsxDEV(h,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:553,columnNumber:13},this),"Test All Connections"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:552,columnNumber:11},this),e.jsxDEV(r,{variant:"outline",className:"w-full justify-start gap-2",children:[e.jsxDEV(f,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:557,columnNumber:13},this),"Rotate All Keys"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:556,columnNumber:11},this),e.jsxDEV(r,{variant:"outline",className:"w-full justify-start gap-2",children:[e.jsxDEV(I,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:561,columnNumber:13},this),"Export Configuration"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:560,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:551,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:544,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/admin/APIKeysManagementPage.tsx",lineNumber:400,columnNumber:5},this)}export{Me as default};
