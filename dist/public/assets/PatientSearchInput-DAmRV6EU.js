import{r,e as s}from"./vendor-react-yzYIzJFU.js";import{e as S,I as v,as as I}from"./index-BiBisH8X.js";import{U as D}from"./user-B9YQAmBR.js";function k({selected:l,onSelect:c,placeholder:m,className:u}){const{toast:d}=S(),[n,h]=r.useState(""),[p,N]=r.useState([]),[b,i]=r.useState(!1);r.useEffect(()=>{f()},[]);const f=async()=>{try{i(!0);const e=await fetch("/api/patients");if(!e.ok)throw new Error("Failed to fetch patients");const x=(await e.json()).map(t=>({id:t.id,name:t.name,email:t.email,phone:t.phone,dateOfBirth:t.dateOfBirth,customerNumber:`PAT-${t.id.slice(0,8).toUpperCase()}`}));N(x)}catch{d({title:"Error",description:"Failed to load patients",variant:"destructive"})}finally{i(!1)}},o=p.filter(e=>{if(!n.trim())return!0;const a=n.toLowerCase().trim();return(e.name||"").toLowerCase().includes(a)||(e.email||"").toLowerCase().includes(a)||(e.phone||"").toLowerCase().includes(a)||(e.customerNumber||"").toLowerCase().includes(a)});return s.jsxDEV("div",{className:u,children:[s.jsxDEV("div",{className:"mb-3",children:s.jsxDEV("div",{className:"relative",children:s.jsxDEV(v,{value:n,onChange:e=>h(e.target.value),placeholder:m||"Search patients by name, email, phone or ID...",className:"pl-10 h-10"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/shared/PatientSearchInput.tsx",lineNumber:70,columnNumber:11},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/shared/PatientSearchInput.tsx",lineNumber:69,columnNumber:9},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/shared/PatientSearchInput.tsx",lineNumber:68,columnNumber:7},this),s.jsxDEV(I,{className:"h-56",children:s.jsxDEV("div",{className:"space-y-2 -mr-2 pr-2",children:b?s.jsxDEV("div",{className:"text-center py-6 text-gray-500 text-sm",children:"Loading patients..."},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/shared/PatientSearchInput.tsx",lineNumber:82,columnNumber:13},this):o.length===0?s.jsxDEV("div",{className:"text-center py-6 text-gray-500 text-sm",children:n?"No patients found":"No patients available"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/shared/PatientSearchInput.tsx",lineNumber:84,columnNumber:13},this):o.map(e=>s.jsxDEV("button",{onClick:()=>c(e),className:`w-full text-left p-3 rounded-lg transition-all duration-200 ${l?.id===e.id?"bg-blue-600 text-white shadow-md":"bg-white border border-gray-200 hover:bg-gray-50 hover:shadow-sm text-gray-900"}`,children:s.jsxDEV("div",{className:"flex items-center gap-2",children:[s.jsxDEV(D,{className:"h-4 w-4 flex-shrink-0"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/shared/PatientSearchInput.tsx",lineNumber:97,columnNumber:19},this),s.jsxDEV("div",{className:"flex-1 min-w-0",children:[s.jsxDEV("div",{className:"font-semibold truncate text-sm",children:e.name},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/shared/PatientSearchInput.tsx",lineNumber:99,columnNumber:21},this),s.jsxDEV("div",{className:"text-xs opacity-80 truncate",children:e.email},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/shared/PatientSearchInput.tsx",lineNumber:100,columnNumber:21},this),s.jsxDEV("div",{className:"text-xs opacity-70 mt-0.5",children:e.customerNumber},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/shared/PatientSearchInput.tsx",lineNumber:101,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/shared/PatientSearchInput.tsx",lineNumber:98,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/shared/PatientSearchInput.tsx",lineNumber:96,columnNumber:17},this)},e.id,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/shared/PatientSearchInput.tsx",lineNumber:87,columnNumber:15},this))},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/shared/PatientSearchInput.tsx",lineNumber:80,columnNumber:9},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/shared/PatientSearchInput.tsx",lineNumber:79,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/components/shared/PatientSearchInput.tsx",lineNumber:67,columnNumber:5},this)}export{k as P};
