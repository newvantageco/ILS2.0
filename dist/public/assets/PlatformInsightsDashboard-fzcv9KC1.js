import{r as t,e as s}from"./vendor-react-yzYIzJFU.js";import{e as os,C as o,a as m,f as p,N as ms,h as c,i as d,J as cs,b as ds,U as F,H as hs,p as us,q as bs,r as g,t as x,j as f,B as I,a9 as fs,w as Ns}from"./index-BiBisH8X.js";import{S as T,a as A,b as B,c as M,d as h}from"./select-BquPdUcS.js";import{L as Ds}from"./lock-ykft9mcf.js";import{R as O}from"./refresh-cw-C3bXnO94.js";import{R as v,C as $,X as K,Y as _,T as S,o as z,B as G,n as ps}from"./generateCategoricalChart-Bo-9lKZ8.js";import{L as gs,a as q}from"./LineChart-Co7_iKjO.js";import{B as xs}from"./BarChart-MfMCmYOy.js";import{P as Is,a as vs}from"./PieChart-BvyTvEcA.js";import{D as Ss}from"./database-CXt6lsO4.js";import"./vendor-mui-DFe-F-Gn.js";import"./vendor-radix-B6etWzp2.js";import"./vendor-react-query-Dxpktacb.js";const H=["#4F46E5","#10B981","#F59E0B","#EF4444","#8B5CF6"];function Bs(){const{toast:i}=os(),[u,J]=t.useState(null),[W,E]=t.useState(!0),[L,k]=t.useState(!1),[j,P]=t.useState([]),[U,X]=t.useState([]),[V,Y]=t.useState([]),[Q,Z]=t.useState(null),[N,ss]=t.useState("all"),[D,es]=t.useState("all"),[as,Es]=t.useState("30");t.useEffect(()=>{(async()=>{try{const a=await fetch("/api/auth/user",{credentials:"include"});if(a.ok){const r=await a.json();J(r)}}catch(a){console.error("Error loading user:",a)}})()},[]),t.useEffect(()=>{u&&u.role!=="platform_admin"&&i({title:"Access Denied",description:"Platform admin access required",variant:"destructive"})},[u,i]),t.useEffect(()=>{u?.role==="platform_admin"&&y()},[u]);const y=async()=>{try{E(!0);const e=await fetch("/api/platform-admin/dashboard",{credentials:"include"});if(!e.ok)throw new Error("Failed to load dashboard");const a=await e.json();a.success&&(Z(a.dashboard),P(a.dashboard.recentInsights||[]),Y(a.dashboard.currentMetrics||[]));const r=new Date,b=new Date;b.setDate(b.getDate()-parseInt(as));const n=await fetch(`/api/platform-admin/statistics?startDate=${b.toISOString()}&endDate=${r.toISOString()}`,{credentials:"include"});if(n.ok){const R=await n.json();R.success&&X(R.statistics||[])}}catch(e){console.error("Error loading dashboard:",e),i({title:"Error",description:"Failed to load platform data",variant:"destructive"})}finally{E(!1)}},w=async()=>{try{const e=new URLSearchParams;N!=="all"&&e.set("insightType",N),D!=="all"&&e.set("accessLevel",D);const a=await fetch(`/api/platform-admin/insights?${e}`,{credentials:"include"});if(!a.ok)throw new Error("Failed to load insights");const r=await a.json();r.success&&P(r.insights)}catch(e){console.error("Error loading insights:",e),i({title:"Error",description:"Failed to load insights",variant:"destructive"})}};t.useEffect(()=>{u?.role==="platform_admin"&&w()},[N,D]);const ts=async()=>{try{k(!0);const e=await fetch("/api/platform-admin/metrics/refresh",{method:"POST",credentials:"include"});if(!e.ok)throw new Error("Failed to refresh metrics");const a=await e.json();a.success&&(i({title:"Success",description:`Refreshed ${a.refreshedMetrics} metrics`}),y())}catch(e){console.error("Error refreshing metrics:",e),i({title:"Error",description:"Failed to refresh metrics",variant:"destructive"})}finally{k(!1)}},rs=async e=>{try{const a=await fetch(`/api/platform-admin/insights/${e}/export`,{credentials:"include"});if(!a.ok)throw new Error("Failed to export insight");const r=await a.blob(),b=window.URL.createObjectURL(r),n=document.createElement("a");n.href=b,n.download=`insight-${e}.csv`,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(b),document.body.removeChild(n),i({title:"Success",description:"Insight exported successfully"})}catch(a){console.error("Error exporting insight:",a),i({title:"Error",description:"Failed to export insight",variant:"destructive"})}},is=async()=>{try{const e=new Date,a=new Date;a.setDate(a.getDate()-30);const r=await fetch("/api/platform-admin/insights/generate",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({type:"invoice_pricing",periodStart:a.toISOString(),periodEnd:e.toISOString()})});if(!r.ok){const n=await r.json();throw new Error(n.message||"Failed to generate insight")}(await r.json()).success&&(i({title:"Success",description:"Insight generated successfully"}),w())}catch(e){console.error("Error generating insight:",e),i({title:"Error",description:e.message||"Failed to generate insight",variant:"destructive"})}};if(u?.role!=="platform_admin")return s.jsxDEV("div",{className:"container max-w-7xl mx-auto p-8",children:s.jsxDEV(o,{children:s.jsxDEV(m,{className:"pt-6",children:s.jsxDEV("div",{className:"flex items-center gap-4 text-destructive",children:[s.jsxDEV(Ds,{className:"h-8 w-8"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:340,columnNumber:15},this),s.jsxDEV("div",{children:[s.jsxDEV("h2",{className:"text-xl font-semibold",children:"Access Denied"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:342,columnNumber:17},this),s.jsxDEV("p",{className:"text-muted-foreground",children:"Platform admin access required to view this dashboard"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:343,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:341,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:339,columnNumber:13},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:338,columnNumber:11},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:337,columnNumber:9},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:336,columnNumber:7},this);if(W)return s.jsxDEV("div",{className:"container max-w-7xl mx-auto p-8",children:s.jsxDEV("div",{className:"flex items-center justify-center h-64",children:s.jsxDEV(O,{className:"h-8 w-8 animate-spin text-muted-foreground"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:358,columnNumber:11},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:357,columnNumber:9},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:356,columnNumber:7},this);const l=Q?.latestStatistics,ls=U.map(e=>({date:new Date(e.date).toLocaleDateString(),MRR:parseFloat(e.mrr),ARR:parseFloat(e.arr)/12})).reverse(),ns=U.map(e=>({date:new Date(e.date).toLocaleDateString(),total:e.totalCompanies,active:e.activeCompanies})).reverse(),C=l?.companiesByType?Object.entries(l.companiesByType).map(([e,a])=>({name:e,value:a})):[];return s.jsxDEV("div",{className:"container max-w-7xl mx-auto p-8 space-y-8",children:[s.jsxDEV("div",{className:"flex items-center justify-between",children:[s.jsxDEV("div",{children:[s.jsxDEV("h1",{className:"text-3xl font-bold",children:"Platform Insights"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:390,columnNumber:11},this),s.jsxDEV("p",{className:"text-muted-foreground mt-1",children:"Cross-tenant analytics and monetizable industry intelligence"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:391,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:389,columnNumber:9},this),s.jsxDEV("div",{className:"flex gap-2",children:[s.jsxDEV(p,{variant:"outline",onClick:ts,disabled:L,children:[s.jsxDEV(O,{className:`h-4 w-4 mr-2 ${L?"animate-spin":""}`},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:401,columnNumber:13},this),"Refresh Metrics"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:396,columnNumber:11},this),s.jsxDEV(p,{onClick:is,children:[s.jsxDEV(ms,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:405,columnNumber:13},this),"Generate New Insight"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:404,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:395,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:388,columnNumber:7},this),l&&s.jsxDEV("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[s.jsxDEV(o,{children:[s.jsxDEV(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsxDEV(d,{className:"text-sm font-medium",children:"Total Revenue (MRR)"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:416,columnNumber:15},this),s.jsxDEV(cs,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:417,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:415,columnNumber:13},this),s.jsxDEV(m,{children:[s.jsxDEV("div",{className:"text-2xl font-bold",children:["£",parseFloat(l.mrr).toLocaleString()]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:420,columnNumber:15},this),s.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:["ARR: £",parseFloat(l.arr).toLocaleString()]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:421,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:419,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:414,columnNumber:11},this),s.jsxDEV(o,{children:[s.jsxDEV(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsxDEV(d,{className:"text-sm font-medium",children:"Total Companies"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:429,columnNumber:15},this),s.jsxDEV(ds,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:430,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:428,columnNumber:13},this),s.jsxDEV(m,{children:[s.jsxDEV("div",{className:"text-2xl font-bold",children:l.totalCompanies},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:433,columnNumber:15},this),s.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:[l.activeCompanies," active"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:434,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:432,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:427,columnNumber:11},this),s.jsxDEV(o,{children:[s.jsxDEV(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsxDEV(d,{className:"text-sm font-medium",children:"B2B Connections"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:442,columnNumber:15},this),s.jsxDEV(F,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:443,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:441,columnNumber:13},this),s.jsxDEV(m,{children:[s.jsxDEV("div",{className:"text-2xl font-bold",children:l.totalConnections},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:446,columnNumber:15},this),s.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:"Network effect growth"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:447,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:445,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:440,columnNumber:11},this),s.jsxDEV(o,{children:[s.jsxDEV(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsxDEV(d,{className:"text-sm font-medium",children:"Platform Uptime"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:455,columnNumber:15},this),s.jsxDEV(hs,{className:"h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:456,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:454,columnNumber:13},this),s.jsxDEV(m,{children:[s.jsxDEV("div",{className:"text-2xl font-bold",children:[parseFloat(l.uptimePercentage).toFixed(2),"%"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:459,columnNumber:15},this),s.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:[l.apiCallsTotal.toLocaleString()," API calls"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:460,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:458,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:453,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:413,columnNumber:9},this),s.jsxDEV(us,{defaultValue:"revenue",className:"space-y-4",children:[s.jsxDEV(bs,{children:[s.jsxDEV(g,{value:"revenue",children:"Revenue Trends"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:471,columnNumber:11},this),s.jsxDEV(g,{value:"companies",children:"Company Growth"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:472,columnNumber:11},this),s.jsxDEV(g,{value:"distribution",children:"Company Distribution"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:473,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:470,columnNumber:9},this),s.jsxDEV(x,{value:"revenue",className:"space-y-4",children:s.jsxDEV(o,{children:[s.jsxDEV(c,{children:[s.jsxDEV(d,{children:"Monthly Recurring Revenue"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:479,columnNumber:15},this),s.jsxDEV(f,{children:"MRR and normalized ARR trends over time"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:480,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:478,columnNumber:13},this),s.jsxDEV(m,{children:s.jsxDEV(v,{width:"100%",height:300,children:s.jsxDEV(gs,{data:ls,children:[s.jsxDEV($,{strokeDasharray:"3 3"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:485,columnNumber:19},this),s.jsxDEV(K,{dataKey:"date"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:486,columnNumber:19},this),s.jsxDEV(_,{},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:487,columnNumber:19},this),s.jsxDEV(S,{formatter:e=>`£${e.toLocaleString()}`},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:488,columnNumber:19},this),s.jsxDEV(z,{},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:489,columnNumber:19},this),s.jsxDEV(q,{type:"monotone",dataKey:"MRR",stroke:"#4F46E5",strokeWidth:2},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:490,columnNumber:19},this),s.jsxDEV(q,{type:"monotone",dataKey:"ARR",stroke:"#10B981",strokeWidth:2,strokeDasharray:"5 5"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:491,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:484,columnNumber:17},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:483,columnNumber:15},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:482,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:477,columnNumber:11},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:476,columnNumber:9},this),s.jsxDEV(x,{value:"companies",className:"space-y-4",children:s.jsxDEV(o,{children:[s.jsxDEV(c,{children:[s.jsxDEV(d,{children:"Company Growth"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:501,columnNumber:15},this),s.jsxDEV(f,{children:"Total and active companies over time"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:502,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:500,columnNumber:13},this),s.jsxDEV(m,{children:s.jsxDEV(v,{width:"100%",height:300,children:s.jsxDEV(xs,{data:ns,children:[s.jsxDEV($,{strokeDasharray:"3 3"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:507,columnNumber:19},this),s.jsxDEV(K,{dataKey:"date"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:508,columnNumber:19},this),s.jsxDEV(_,{},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:509,columnNumber:19},this),s.jsxDEV(S,{},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:510,columnNumber:19},this),s.jsxDEV(z,{},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:511,columnNumber:19},this),s.jsxDEV(G,{dataKey:"total",fill:"#4F46E5",name:"Total Companies"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:512,columnNumber:19},this),s.jsxDEV(G,{dataKey:"active",fill:"#10B981",name:"Active Companies"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:513,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:506,columnNumber:17},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:505,columnNumber:15},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:504,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:499,columnNumber:11},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:498,columnNumber:9},this),s.jsxDEV(x,{value:"distribution",className:"space-y-4",children:s.jsxDEV(o,{children:[s.jsxDEV(c,{children:[s.jsxDEV(d,{children:"Company Distribution by Type"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:523,columnNumber:15},this),s.jsxDEV(f,{children:"Breakdown of company types on the platform"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:524,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:522,columnNumber:13},this),s.jsxDEV(m,{children:s.jsxDEV(v,{width:"100%",height:300,children:s.jsxDEV(Is,{children:[s.jsxDEV(vs,{data:C,cx:"50%",cy:"50%",labelLine:!1,label:({name:e,percent:a})=>`${e}: ${(a*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:C.map((e,a)=>s.jsxDEV(ps,{fill:H[a%H.length]},`cell-${a}`,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:540,columnNumber:23},this))},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:529,columnNumber:19},this),s.jsxDEV(S,{},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:543,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:528,columnNumber:17},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:527,columnNumber:15},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:526,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:521,columnNumber:11},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:520,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:469,columnNumber:7},this),s.jsxDEV(o,{children:[s.jsxDEV(c,{children:s.jsxDEV("div",{className:"flex items-center justify-between",children:[s.jsxDEV("div",{children:[s.jsxDEV(d,{children:"Market Insights"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:556,columnNumber:15},this),s.jsxDEV(f,{children:"Anonymized cross-tenant analytics for monetization"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:557,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:555,columnNumber:13},this),s.jsxDEV("div",{className:"flex gap-2",children:[s.jsxDEV(T,{value:N,onValueChange:ss,children:[s.jsxDEV(A,{className:"w-[180px]",children:s.jsxDEV(B,{placeholder:"Filter by type"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:564,columnNumber:19},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:563,columnNumber:17},this),s.jsxDEV(M,{children:[s.jsxDEV(h,{value:"all",children:"All Types"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:567,columnNumber:19},this),s.jsxDEV(h,{value:"pricing",children:"Pricing"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:568,columnNumber:19},this),s.jsxDEV(h,{value:"inventory",children:"Inventory"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:569,columnNumber:19},this),s.jsxDEV(h,{value:"patient_metrics",children:"Patient Metrics"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:570,columnNumber:19},this),s.jsxDEV(h,{value:"operational",children:"Operational"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:571,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:566,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:562,columnNumber:15},this),s.jsxDEV(T,{value:D,onValueChange:es,children:[s.jsxDEV(A,{className:"w-[180px]",children:s.jsxDEV(B,{placeholder:"Filter by access"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:577,columnNumber:19},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:576,columnNumber:17},this),s.jsxDEV(M,{children:[s.jsxDEV(h,{value:"all",children:"All Levels"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:580,columnNumber:19},this),s.jsxDEV(h,{value:"free",children:"Free"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:581,columnNumber:19},this),s.jsxDEV(h,{value:"premium",children:"Premium"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:582,columnNumber:19},this),s.jsxDEV(h,{value:"enterprise",children:"Enterprise"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:583,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:579,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:575,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:561,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:554,columnNumber:11},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:553,columnNumber:9},this),s.jsxDEV(m,{children:s.jsxDEV("div",{className:"space-y-4",children:j.length===0?s.jsxDEV("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsxDEV(Ss,{className:"h-12 w-12 mx-auto mb-4 opacity-50"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:593,columnNumber:17},this),s.jsxDEV("p",{children:"No insights available with current filters"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:594,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:592,columnNumber:15},this):j.map(e=>s.jsxDEV("div",{className:"border rounded-lg p-4 hover:bg-accent/50 transition-colors",children:s.jsxDEV("div",{className:"flex items-start justify-between",children:[s.jsxDEV("div",{className:"flex-1",children:[s.jsxDEV("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxDEV("h3",{className:"font-semibold",children:e.title},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:605,columnNumber:25},this),s.jsxDEV(I,{variant:e.accessLevel==="free"?"secondary":"default",children:e.accessLevel},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:606,columnNumber:25},this),e.price&&s.jsxDEV(I,{variant:"outline",children:["£",e.price]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:610,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:604,columnNumber:23},this),s.jsxDEV("p",{className:"text-sm text-muted-foreground mb-3",children:e.description},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:613,columnNumber:23},this),s.jsxDEV("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[s.jsxDEV("span",{className:"flex items-center gap-1",children:[s.jsxDEV(F,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:618,columnNumber:27},this),e.companiesIncluded," companies"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:617,columnNumber:25},this),s.jsxDEV("span",{children:[new Date(e.periodStart).toLocaleDateString()," - ",new Date(e.periodEnd).toLocaleDateString()]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:621,columnNumber:25},this),e.region&&s.jsxDEV("span",{children:["Region: ",e.region]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:624,columnNumber:44},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:616,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:603,columnNumber:21},this),s.jsxDEV(p,{size:"sm",variant:"outline",onClick:()=>rs(e.id),children:[s.jsxDEV(fs,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:632,columnNumber:23},this),"Export CSV"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:627,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:602,columnNumber:19},this)},e.id,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:598,columnNumber:17},this))},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:590,columnNumber:11},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:589,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:552,columnNumber:7},this),s.jsxDEV(o,{children:[s.jsxDEV(c,{children:[s.jsxDEV(d,{children:"Aggregated Metrics"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:646,columnNumber:11},this),s.jsxDEV(f,{children:"Pre-computed statistical metrics across the platform"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:647,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:645,columnNumber:9},this),s.jsxDEV(m,{children:s.jsxDEV("div",{className:"space-y-4",children:V.length===0?s.jsxDEV("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsxDEV(Ns,{className:"h-12 w-12 mx-auto mb-4 opacity-50"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:655,columnNumber:17},this),s.jsxDEV("p",{children:'No metrics available. Click "Refresh Metrics" to compute.'},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:656,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:654,columnNumber:15},this):V.map(e=>s.jsxDEV("div",{className:"border rounded-lg p-4",children:[s.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:[s.jsxDEV("h3",{className:"font-semibold",children:e.metricType.replace(/_/g," ").toUpperCase()},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:665,columnNumber:21},this),s.jsxDEV(I,{variant:"secondary",children:[e.sampleSize," companies"]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:666,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:664,columnNumber:19},this),s.jsxDEV("div",{className:"grid grid-cols-5 gap-4 text-sm",children:[s.jsxDEV("div",{children:[s.jsxDEV("p",{className:"text-muted-foreground",children:"Average"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:670,columnNumber:23},this),s.jsxDEV("p",{className:"font-mono",children:parseFloat(e.average).toFixed(2)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:671,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:669,columnNumber:21},this),s.jsxDEV("div",{children:[s.jsxDEV("p",{className:"text-muted-foreground",children:"Median"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:674,columnNumber:23},this),s.jsxDEV("p",{className:"font-mono",children:parseFloat(e.median).toFixed(2)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:675,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:673,columnNumber:21},this),s.jsxDEV("div",{children:[s.jsxDEV("p",{className:"text-muted-foreground",children:"Min"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:678,columnNumber:23},this),s.jsxDEV("p",{className:"font-mono",children:parseFloat(e.min).toFixed(2)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:679,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:677,columnNumber:21},this),s.jsxDEV("div",{children:[s.jsxDEV("p",{className:"text-muted-foreground",children:"Max"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:682,columnNumber:23},this),s.jsxDEV("p",{className:"font-mono",children:parseFloat(e.max).toFixed(2)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:683,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:681,columnNumber:21},this),s.jsxDEV("div",{children:[s.jsxDEV("p",{className:"text-muted-foreground",children:"Updated"},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:686,columnNumber:23},this),s.jsxDEV("p",{className:"text-xs",children:new Date(e.lastRefreshed).toLocaleDateString()},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:687,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:685,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:668,columnNumber:19},this)]},e.id,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:660,columnNumber:17},this))},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:652,columnNumber:11},this)},void 0,!1,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:651,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:644,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/saban/Desktop/ILS2.0/client/src/pages/PlatformInsightsDashboard.tsx",lineNumber:386,columnNumber:5},this)}export{Bs as default};
