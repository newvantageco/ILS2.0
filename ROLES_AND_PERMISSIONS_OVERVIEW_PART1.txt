================================================================================
    ROLES & MULTI-TENANT WORKFLOW ACCESS OVERVIEW - PART 1
    IntegratedLensSystem (ILS 2.0)
    Generated: November 5, 2025
================================================================================

TABLE OF CONTENTS - PART 1
================================================================================
1. System Architecture
2. User Roles Hierarchy
3. Multi-Tenant Architecture
4. Access Control Workflow
5. Permission Matrix

================================================================================
1. SYSTEM ARCHITECTURE
================================================================================

The IntegratedLensSystem uses a comprehensive Role-Based Access Control (RBAC)
system with multi-tenant company isolation. This ensures complete data
separation between companies while allowing flexible role-based permissions
within each organization.

KEY FEATURES:
âœ“ 7 distinct user roles with hierarchical permissions
âœ“ Complete database-level company isolation
âœ“ Platform-level administration for system operators
âœ“ Company-level administration for business owners
âœ“ Specialized operational roles for different functions
âœ“ Automatic data filtering by company
âœ“ Cascade deletion for clean data management
âœ“ Session-based authentication with secure tokens

SECURITY MODEL:
- Multi-layer authorization (Middleware â†’ Database â†’ Application)
- Company data isolated by foreign key relationships
- Cross-company access blocked (except platform admins)
- Permission validation on every sensitive operation
- Audit trails for all administrative actions

================================================================================
2. USER ROLES HIERARCHY
================================================================================

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          PLATFORM LEVEL                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ROLE: platform_admin
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Display Name: Platform Administrator
Access Level: UNRESTRICTED - All companies, all data
Company Isolation: NONE (sees everything)

PERMISSIONS:
âœ“ View/Create/Edit/Delete ALL companies
âœ“ View/Create/Edit/Delete ALL users across all companies
âœ“ Manage system-wide settings and configurations
âœ“ Access admin dashboard and system logs
âœ“ View analytics across all companies
âœ“ Unlimited AI access without subscription limits
âœ“ Manage AI settings globally
âœ“ View all orders, patients, inventory, reports (all companies)
âœ“ Override any company-level restrictions

USE CASES:
- System owner/operator
- Platform maintenance and support
- Cross-company data analysis
- System-wide configuration management

TECHNICAL DETAILS:
- companyId: NULL (not associated with any company)
- Can impersonate any company for support purposes
- Bypasses all company-level access controls
- Special flag: isPlatformAdmin = true


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          COMPANY LEVEL ROLES                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ROLE 1: company_admin
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Display Name: Company Administrator / Owner
Access Level: FULL within their company only
Company Isolation: YES (only sees their company data)

PERMISSIONS:
âœ“ View own company details and settings
âœ“ Edit own company information
âœ“ Manage company settings and billing
âœ“ View company billing and payment history

USER MANAGEMENT:
âœ“ View all users in their company
âœ“ Create new users (company-level roles only)
âœ“ Edit existing users in their company
âœ“ Delete/deactivate users in their company
âœ“ Reset user passwords within company
âœ— Cannot create platform_admin users
âœ— Cannot access users from other companies

DATA ACCESS:
âœ“ View/Create/Edit all company orders
âœ“ View/Create/Edit all company patients
âœ“ View/Manage company inventory
âœ“ View all company reports and analytics
âœ“ View/Create prescriptions and examinations
âœ“ Access company dashboard

AI & FEATURES:
âœ“ Full AI access (subject to subscription plan)
âœ“ Manage company-specific AI settings

USE CASES:
- Practice owner
- Business manager
- Office administrator
- Company decision-maker

RESTRICTIONS:
âœ— Cannot see data from other companies
âœ— Cannot create/edit platform-level settings
âœ— Cannot promote users to platform_admin
âœ— Cannot delete their own account


ROLE 2: ecp (Eye Care Professional)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Display Name: Eye Care Professional
Access Level: STANDARD operational access within company
Company Isolation: YES

PERMISSIONS:
âœ“ View own company information
âœ“ View company users (read-only)
âœ“ Access company dashboard
âœ“ View company analytics

DATA OPERATIONS:
âœ“ View all company orders
âœ“ Create new orders
âœ“ Edit own orders only
âœ“ View all company patients
âœ“ Create new patients
âœ“ Edit patient information
âœ“ View company inventory (read-only)
âœ“ View company reports

CLINICAL:
âœ“ View company prescriptions
âœ“ Create new prescriptions
âœ“ View company examinations
âœ“ Create new examinations

AI ACCESS:
âœ“ Basic AI access (subscription-dependent)
   - Free ECP Plan: Limited AI queries
   - Full Plan: Enhanced AI features

USE CASES:
- Optometrist
- Optician
- Primary clinical user
- Front desk staff with clinical duties

RESTRICTIONS:
âœ— Cannot manage users
âœ— Cannot edit other users' orders
âœ— Cannot manage inventory
âœ— Cannot edit company settings
âœ— Limited AI access on free plan


ROLE 3: optometrist (Enhanced Role)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Display Name: Optometrist
Access Level: CLINICAL operations within company
Company Isolation: YES

PERMISSIONS:
âœ“ All ECP permissions PLUS:
âœ“ Create comprehensive eye examinations
âœ“ Finalize eye examinations
âœ“ Prescribe and validate prescriptions
âœ“ Full patient clinical management
âœ“ Access clinical reports
âœ“ GOC registration validation

CLINICAL PRIVILEGES:
âœ“ Perform complete eye examinations
âœ“ Record detailed examination data:
   - Visual acuity
   - Refraction
   - Ophthalmoscopy
   - Slit lamp examination
   - Tonometry
   - Additional tests
âœ“ Finalize examination records
âœ“ Sign off on prescriptions

REQUIREMENTS:
- Must have GOC (General Optical Council) registration number
- Professional qualifications verified
- Registration must be valid and not expired

USE CASES:
- Licensed optometrist
- Clinical practitioner
- Eye health professional

TECHNICAL DETAILS:
- Stored in users.enhancedRole field
- Linked to users.gocRegistrationNumber
- Additional validation on clinical operations


ROLE 4: lab_tech (Laboratory Technician)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Display Name: Laboratory Technician
Access Level: PRODUCTION operations within company
Company Isolation: YES

PERMISSIONS:
âœ“ View own company information
âœ“ View company users (read-only)
âœ“ Access company dashboard

PRODUCTION:
âœ“ View company orders (read-only)
âœ“ Update order status
âœ“ View company inventory
âœ“ Update inventory levels
âœ“ View production queue
âœ“ Update production status
âœ“ Report quality issues
âœ“ View quality reports

USE CASES:
- Lab worker
- Production staff
- Lens technician
- Manufacturing operator

RESTRICTIONS:
âœ— Cannot create orders
âœ— Cannot edit order details (only status)
âœ— Cannot manage users
âœ— Cannot access patient information
âœ— No AI access


ROLE 5: engineer
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Display Name: Engineer
Access Level: TECHNICAL operations within company
Company Isolation: YES

PERMISSIONS:
âœ“ View own company information
âœ“ View company users (read-only)
âœ“ Access company dashboard

EQUIPMENT MANAGEMENT:
âœ“ View all equipment
âœ“ Manage equipment (add/edit/configure)
âœ“ View maintenance logs
âœ“ Create maintenance records
âœ“ Update equipment status

DATA ACCESS:
âœ“ View company orders (read-only)
âœ“ View company inventory (read-only)
âœ“ Update inventory (for parts/consumables)
âœ“ View technical reports

USE CASES:
- Equipment technician
- Maintenance engineer
- Technical support staff
- Equipment calibration specialist

RESTRICTIONS:
âœ— Cannot create/edit orders
âœ— Cannot access patient information
âœ— Cannot manage users
âœ— No clinical access
âœ— No AI access


ROLE 6: supplier
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Display Name: Supplier / Vendor
Access Level: LIMITED portal access
Company Isolation: YES

PERMISSIONS:
âœ“ View own company information

SUPPLIER OPERATIONS:
âœ“ View supplier-specific orders only
âœ“ View company inventory (relevant items)
âœ“ Manage supplier catalog
âœ“ Update product information
âœ“ View supplier reports
âœ“ Manage shipment status

USE CASES:
- External vendor
- Material supplier
- Lens manufacturer
- Equipment supplier

RESTRICTIONS:
âœ— Cannot see all orders (only supplier-specific)
âœ— Cannot view patients
âœ— Cannot view users
âœ— Cannot create orders
âœ— Limited inventory visibility
âœ— No AI access
âœ— No clinical access


ROLE 7: admin (Legacy/Deprecated)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Display Name: Administrator (Legacy)
Status: BEING PHASED OUT - Mapped to company_admin

NOTES:
- Existing "admin" users function as company_admin
- New users should be created as company_admin
- Maintained for backward compatibility only
- Same permissions as company_admin

MIGRATION:
All existing "admin" users will be gradually migrated to "company_admin"
role as part of system updates.


================================================================================
3. MULTI-TENANT ARCHITECTURE
================================================================================

DATABASE-LEVEL ISOLATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

SCHEMA DESIGN:
Every major table includes a companyId foreign key:

  companyId: varchar("company_id")
    .notNull()
    .references(() => companies.id, { onDelete: 'cascade' })

BENEFITS:
âœ“ Enforced at database level (referential integrity)
âœ“ Automatic data isolation
âœ“ CASCADE DELETE: When company deleted, all data removed
âœ“ Indexed for fast queries (idx_tablename_company)
âœ“ Cannot insert data without valid companyId


TABLES WITH COMPANY ISOLATION (40+ tables):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

CORE ENTITIES:
- users                   All users belong to a company
- orders                  All orders scoped to company
- patients                Patient records per company
- prescriptions           Prescriptions per company

CLINICAL:
- eyeExaminations         Eye exams per company
- dispenseRecords         Dispensing records per company
- recalls                 Patient recalls per company

OPERATIONS:
- equipment               Equipment inventory per company
- inventory               Stock and materials per company
- suppliers               Supplier relationships per company
- companySuppliers        Company-supplier links

AI & INTELLIGENCE:
- aiConversations         AI chat history per company
- aiKnowledgeBase         Knowledge bases per company
- aiLearningData          Learning data per company
- aiFeedback              User feedback per company
- aiDeployments           AI model deployments per company
- companyAiSettings       AI configuration per company

FINANCIAL:
- paymentIntents          Payment records per company
- subscriptionHistory     Subscription changes per company

ANALYTICS:
- demandForecasts         Demand predictions per company
- productionPlans         Production schedules per company
- inventoryOptimization   Inventory optimization per company

PERMISSIONS:
- rolePermissions         Custom permissions per company
- auditLogs               Activity logs per company

NOTIFICATIONS:
- notifications           User notifications per company

And many more...


QUERY-LEVEL ISOLATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

AUTOMATIC FILTERING:
Every data query includes company filtering (except platform admin):

  // Platform admin - NO FILTER
  if (isPlatformAdmin) {
    const data = await db.select().from(orders);
  }

  // Company users - FILTERED
  if (!isPlatformAdmin) {
    const data = await db
      .select()
      .from(orders)
      .where(eq(orders.companyId, userCompanyId));
  }

IMPLEMENTATION:
Helper functions in server/middleware/companyIsolation.ts:

  getCompanyFilter(req)
    Returns: { companyId: userCompanyId } or {}
    
  getValidCompanyId(req, targetCompanyId?)
    Returns: Validated companyId or null
    
  canAccessCompany(userRole, userCompanyId, targetCompanyId)
    Returns: true/false based on access rights


APPLICATION-LEVEL ISOLATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

MIDDLEWARE STACK:
1. authenticateUser          Validates session token
2. enforceCompanyIsolation   Loads company context
3. validateCompanyAccess     Checks company permission
4. Route handler             Executes business logic

ENFORCEMENT:
âœ“ Company context added to every request
âœ“ isPlatformAdmin flag set automatically
âœ“ Validation before data access
âœ“ 403 Forbidden for unauthorized access
âœ“ Clear error messages for users


================================================================================
4. ACCESS CONTROL WORKFLOW
================================================================================

AUTHENTICATION FLOW
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

STEP 1: User Login
  â†“
  User provides: email + password
  â†“
  System validates credentials against users table
  â†“
  If valid, create session in sessions table

STEP 2: Session Created
  â†“
  Session contains:
  - sid (session ID / token)
  - userId
  - sess (session data):
    â€¢ user.id
    â€¢ user.email
    â€¢ user.role
    â€¢ user.companyId (NULL for platform_admin)
    â€¢ user.subscriptionPlan
    â€¢ user.isActive
  â†“
  Session token returned to client

STEP 3: Subsequent Requests
  â†“
  Client sends: Authorization: Bearer {session_token}
  â†“
  Middleware: authenticateUser
  - Validates session token
  - Checks session not expired
  - Loads user data from database
  - Verifies user.isActive = true
  - Verifies user.isVerified = true
  â†“
  Adds to request: req.user = { id, email, role, companyId }

STEP 4: Company Context
  â†“
  Middleware: enforceCompanyIsolation
  - Extracts user.companyId
  - Sets req.userCompanyId = companyId
  - Sets req.isPlatformAdmin flag
  - Validates user belongs to company
  â†“
  Request now has full context

STEP 5: Authorization
  â†“
  Middleware: validateCompanyAccess (if needed)
  - Checks if user can access target company
  - Platform admin: ALLOW all
  - Others: ALLOW only their company
  â†“
  Middleware: requireRole (if needed)
  - Checks user has required role
  - Returns 403 if insufficient permissions

STEP 6: Route Handler
  â†“
  Business logic executes:
  - Queries filtered by companyId
  - Permission checks applied
  - Data returned (company-scoped)


AUTHORIZATION LAYERS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

LAYER 1: MIDDLEWARE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Available Middleware Functions:

1. enforceCompanyIsolation
   - Loads company context from user
   - Sets userCompanyId and isPlatformAdmin
   - Required on all protected company routes

2. validateCompanyAccess(companyIdParam)
   - Validates access to specific company
   - Checks params, query, or body for companyId
   - Platform admin: bypass check
   - Others: must match userCompanyId

3. requireCompany
   - Ensures user has a company
   - Blocks platform admin (if desired)
   - Returns 403 if no company

4. requirePlatformAdmin
   - Only platform_admin can proceed
   - Returns 403 for all other roles

5. requireCompanyOrPlatformAdmin
   - Allows: platform_admin, company_admin, admin
   - Blocks: ecp, lab_tech, engineer, supplier

6. requireRole(['role1', 'role2'])
   - Checks user has one of specified roles
   - Returns 403 if role not in list

EXAMPLE USAGE:
  router.get('/users',
    authenticateUser,
    enforceCompanyIsolation,
    requireCompanyOrPlatformAdmin,
    async (req, res) => {
      // Only admins reach here
    }
  );


LAYER 2: DATABASE QUERIES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Pattern for all data queries:

  const isPlatformAdmin = req.isPlatformAdmin;
  const userCompanyId = req.userCompanyId;

  let query = db.select().from(tableName);

  // Platform admin sees ALL
  if (!isPlatformAdmin) {
    // Others see only their company
    query = query.where(eq(tableName.companyId, userCompanyId));
  }

  const results = await query;

Helper Function:
  const companyFilter = getCompanyFilter(req);
  // Returns { companyId: '...' } or {} for platform admin


LAYER 3: PERMISSION CHECKS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Functions from server/utils/rbac.ts:

1. hasPermission(userRole, permission)
   Returns: boolean
   Example: hasPermission('ecp', 'create_order')
   
2. canAccessCompany(userRole, userCompanyId, targetCompanyId)
   Returns: boolean
   Checks if user can access specific company
   
3. canViewUsers(userRole, userCompanyId, targetUserCompanyId?)
   Returns: boolean
   Checks if user can view other users
   
4. canManageUsers(userRole, userCompanyId, targetUserCompanyId?)
   Returns: boolean
   Checks if user can create/edit/delete users
   
5. getAllowedRolesForCreation(userRole)
   Returns: UserRole[]
   Lists roles this user can create
   
6. isPlatformAdmin(userRole)
   Returns: boolean
   Quick check for platform admin
   
7. isCompanyAdmin(userRole)
   Returns: boolean
   Check for company_admin or admin
   
8. canChangeRole(currentUserRole, targetUserRole, newRole)
   Returns: boolean
   Validates if role transition is allowed

USAGE EXAMPLE:
  if (!canManageUsers(user.role, user.companyId, targetCompanyId)) {
    return res.status(403).json({ error: 'Permission denied' });
  }


================================================================================
5. PERMISSION MATRIX
================================================================================

Legend:
  âœ… = Allowed
  âŒ = Denied
  ğŸ”„ = Limited/Conditional
  ğŸ“Š = View Only

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ACTION                    Platform  Company   ECP    Optom  Lab    Eng   Supp
                          Admin     Admin                   Tech          
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

COMPANY MANAGEMENT
View All Companies        âœ…        âŒ        âŒ     âŒ     âŒ     âŒ    âŒ
View Own Company          âœ…        âœ…        âœ…     âœ…     âœ…     âœ…    âœ…
Create Company            âœ…        âŒ        âŒ     âŒ     âŒ     âŒ    âŒ
Edit Any Company          âœ…        âŒ        âŒ     âŒ     âŒ     âŒ    âŒ
Edit Own Company          âœ…        âœ…        âŒ     âŒ     âŒ     âŒ    âŒ
Delete Company            âœ…        âŒ        âŒ     âŒ     âŒ     âŒ    âŒ
Manage Settings           âœ…        âœ…        âŒ     âŒ     âŒ     âŒ    âŒ
View Billing              âœ…        âœ…        âŒ     âŒ     âŒ     âŒ    âŒ

USER MANAGEMENT
View All Users            âœ…        âŒ        âŒ     âŒ     âŒ     âŒ    âŒ
View Company Users        âœ…        âœ…        âœ…     âœ…     âœ…     âœ…    âŒ
Create User (Any Co)      âœ…        âŒ        âŒ     âŒ     âŒ     âŒ    âŒ
Create User (Own Co)      âœ…        âœ…        âŒ     âŒ     âŒ     âŒ    âŒ
Edit User (Any Co)        âœ…        âŒ        âŒ     âŒ     âŒ     âŒ    âŒ
Edit User (Own Co)        âœ…        âœ…        âŒ     âŒ     âŒ     âŒ    âŒ
Delete User               âœ…        âœ…        âŒ     âŒ     âŒ     âŒ    âŒ
Reset Password            âœ…        âœ…        âŒ     âŒ     âŒ     âŒ    âŒ

ORDER MANAGEMENT
View All Orders           âœ…        âŒ        âŒ     âŒ     âŒ     âŒ    âŒ
View Company Orders       âœ…        âœ…        âœ…     âœ…     ğŸ“Š     ğŸ“Š    ğŸ”„
Create Order              âœ…        âœ…        âœ…     âœ…     âŒ     âŒ    âŒ
Edit Any Order            âœ…        âŒ        âŒ     âŒ     âŒ     âŒ    âŒ
Edit Company Order        âœ…        âœ…        ğŸ”„     ğŸ”„     âŒ     âŒ    âŒ
Edit Own Order            âœ…        âœ…        âœ…     âœ…     âŒ     âŒ    âŒ
Update Order Status       âœ…        âœ…        âŒ     âŒ     âœ…     âŒ    ğŸ”„
Delete Order              âœ…        âœ…        âŒ     âŒ     âŒ     âŒ    âŒ
Cancel Order              âœ…        âœ…        ğŸ”„     ğŸ”„     âŒ     âŒ    âŒ

PATIENT MANAGEMENT
View All Patients         âœ…        âŒ        âŒ     âŒ     âŒ     âŒ    âŒ
View Company Patients     âœ…        âœ…        âœ…     âœ…     âŒ     âŒ    âŒ
Create Patient            âœ…        âœ…        âœ…     âœ…     âŒ     âŒ    âŒ
Edit Patient              âœ…        âœ…        âœ…     âœ…     âŒ     âŒ    âŒ
Delete Patient            âœ…        âœ…        ğŸ”„     ğŸ”„     âŒ     âŒ    âŒ
View Patient History      âœ…        âœ…        âœ…     âœ…     âŒ     âŒ    âŒ

CLINICAL
View Prescriptions        âœ…        âœ…        âœ…     âœ…     âŒ     âŒ    âŒ
Create Prescription       âœ…        âœ…        âœ…     âœ…     âŒ     âŒ    âŒ
Edit Prescription         âœ…        âœ…        ğŸ”„     âœ…     âŒ     âŒ    âŒ
View Examinations         âœ…        âœ…        âœ…     âœ…     âŒ     âŒ    âŒ
Create Examination        âœ…        âœ…        âœ…     âœ…     âŒ     âŒ    âŒ
Edit Examination          âœ…        âœ…        ğŸ”„     âœ…     âŒ     âŒ    âŒ
Finalize Examination      âœ…        âœ…        âŒ     âœ…     âŒ     âŒ    âŒ
View Recalls              âœ…        âœ…        âœ…     âœ…     âŒ     âŒ    âŒ
Create Recall             âœ…        âœ…        âœ…     âœ…     âŒ     âŒ    âŒ

INVENTORY
View All Inventory        âœ…        âŒ        âŒ     âŒ     âŒ     âŒ    âŒ
View Company Inventory    âœ…        âœ…        ğŸ“Š     ğŸ“Š     âœ…     âœ…    ğŸ“Š
Manage Inventory          âœ…        âœ…        âŒ     âŒ     âœ…     âœ…    âŒ
Update Stock Levels       âœ…        âœ…        âŒ     âŒ     âœ…     âœ…    âŒ
View Inventory Reports    âœ…        âœ…        ğŸ“Š     ğŸ“Š     âœ…     âœ…    ğŸ“Š

EQUIPMENT
View Equipment            âœ…        âœ…        ğŸ“Š     ğŸ“Š     ğŸ“Š     âœ…    âŒ
Manage Equipment          âœ…        âœ…        âŒ     âŒ     âŒ     âœ…    âŒ
View Maintenance Logs     âœ…        âœ…        ğŸ“Š     ğŸ“Š     ğŸ“Š     âœ…    âŒ
Create Maintenance        âœ…        âœ…        âŒ     âŒ     âŒ     âœ…    âŒ
Update Equipment Status   âœ…        âœ…        âŒ     âŒ     âŒ     âœ…    âŒ

PRODUCTION
View Production Queue     âœ…        âœ…        ğŸ“Š     ğŸ“Š     âœ…     ğŸ“Š    âŒ
Update Production Status  âœ…        âœ…        âŒ     âŒ     âœ…     âŒ    âŒ
Report Quality Issues     âœ…        âœ…        âŒ     âŒ     âœ…     âœ…    âŒ
View Quality Reports      âœ…        âœ…        ğŸ“Š     ğŸ“Š     âœ…     âœ…    âŒ

ANALYTICS
View System Analytics     âœ…        âŒ        âŒ     âŒ     âŒ     âŒ    âŒ
View Company Analytics    âœ…        âœ…        âœ…     âœ…     ğŸ”„     ğŸ”„    ğŸ”„
View Reports              âœ…        âœ…        âœ…     âœ…     ğŸ”„     ğŸ”„    ğŸ”„
Export Data               âœ…        âœ…        ğŸ”„     ğŸ”„     âŒ     âŒ    âŒ

AI FEATURES
Unlimited AI Access       âœ…        âŒ        âŒ     âŒ     âŒ     âŒ    âŒ
Full AI Access            âœ…        ğŸ”„        ğŸ”„     ğŸ”„     âŒ     âŒ    âŒ
Basic AI Access           âœ…        âœ…        âœ…     âœ…     âŒ     âŒ    âŒ
Manage AI Settings        âœ…        ğŸ”„        âŒ     âŒ     âŒ     âŒ    âŒ

SYSTEM
Access Admin Dashboard    âœ…        ğŸ”„        âŒ     âŒ     âŒ     âŒ    âŒ
View System Logs          âœ…        âŒ        âŒ     âŒ     âŒ     âŒ    âŒ
Manage System Settings    âœ…        âŒ        âŒ     âŒ     âŒ     âŒ    âŒ
View Audit Logs           âœ…        âœ…        âŒ     âŒ     âŒ     âŒ    âŒ

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

NOTES:
ğŸ”„ Limited/Conditional = Access depends on additional factors:
   - Subscription plan (for AI features)
   - Own vs other users' data
   - Record status (e.g., finalized exams)
   - Supplier relationship (for supplier role)

ğŸ“Š View Only = Can see data but cannot modify

================================================================================
END OF PART 1
================================================================================
